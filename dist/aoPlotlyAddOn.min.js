!function(e){"use strict";"undefined"==typeof aoPlotlyAddOn?e.aoPlotlyAddOn=function(){var t={},a=!0,n=!0,o=!1,r=!1,s=!1,i=!1,l=!1,g=!1,c=!1,u=!0,d=!0,m=!0,y=!0,f={en:{dictionary:{close:"close"},format:{decimal:"."}}};function p(e,t){return void 0!==t&&"object"==typeof t&&void 0!==t[e]&&void 0!==t[e].dictionary&&"object"==typeof t[e].dictionary?t[e].dictionary:{}}var h=p("en",f);function x(e){return void 0===h[e]?e:h[e]}a&&console.log("translations - default en: ",h),t.register=function(e){var t=e;"undefined"!==t.moduleType&&"locale"===t.moduleType&&(f[t.name]={},f[t.name].dictionary=t.dictionary,f[t.name].format=t.format),a&&console.log("locales: ",f)};var v=[!1],b=[!1],D=[{x0:"1857-06-01",x1:"1858-11-30"},{x0:"1860-10-01",x1:"1861-05-31"},{x0:"1865-04-01",x1:"1867-11-30"},{x0:"1869-06-01",x1:"1870-11-30"},{x0:"1873-10-01",x1:"1879-02-28"},{x0:"1882-03-01",x1:"1885-04-30"},{x0:"1887-03-01",x1:"1888-03-31"},{x0:"1890-07-01",x1:"1891-04-30"},{x0:"1893-01-01",x1:"1894-05-31"},{x0:"1895-12-01",x1:"1897-05-31"},{x0:"1899-06-01",x1:"1900-11-30"},{x0:"1902-09-01",x1:"1904-07-31"},{x0:"1907-05-01",x1:"1908-05-31"},{x0:"1910-01-01",x1:"1911-12-31"},{x0:"1913-01-01",x1:"1914-11-30"},{x0:"1918-08-01",x1:"1919-02-28"},{x0:"1920-01-01",x1:"1921-06-30"},{x0:"1923-05-01",x1:"1924-06-30"},{x0:"1926-10-01",x1:"1927-10-31"},{x0:"1929-08-01",x1:"1933-02-28"},{x0:"1937-05-01",x1:"1938-05-31"},{x0:"1945-02-01",x1:"1945-09-30"},{x0:"1948-11-01",x1:"1949-09-30"},{x0:"1953-07-01",x1:"1954-04-30"},{x0:"1957-08-01",x1:"1958-03-31"},{x0:"1960-04-01",x1:"1961-01-31"},{x0:"1969-12-01",x1:"1970-10-31"},{x0:"1973-11-01",x1:"1975-02-28"},{x0:"1980-01-01",x1:"1980-06-30"},{x0:"1981-07-01",x1:"1982-10-31"},{x0:"1990-07-01",x1:"1991-02-28"},{x0:"2001-03-01",x1:"2001-10-31"},{x0:"2007-12-01",x1:"2009-05-31"}];function w(e,t,a,n,o){setTimeout(function(){new Date-e>t||a[0]?o():w(e,t,a,n,o)},n)}function A(e,t,r,s){new Date,a&&o&&console.time("TIME: parallelReadData");var i=I;a&&n&&console.log("queueConcurrencyLimit: ",t.settings.queueConcurrencyLimit);for(var l=d3.queue(t.settings.queueConcurrencyLimit),c=t.dataSources.length,u=0;u<c;u++)a&&n&&console.log("add call parallelReadData to defer: ",u),l.defer(i,e,u,t);t.settings.displayRecessions&&(b[0]||v[0]||(a&&m&&console.log("adding update recessions to queue"),a&&m&&console.log("param.settings.newRecessionsUrl",t.settings.newRecessionsUrl),a&&m&&console.log("knownRecessionsDates",D),l.defer(E,t.settings.newRecessionsUrl,D))),l.awaitAll(function(i){i?(a&&n&&console.log("plotQueu await threw error"),a&&n&&console.log("the error is",i)):(a&&n&&g&&console.log("param.usRecessions.length before calling makeChart: ",t.usRecessions.length),a&&n&&console.log("data: ",e),a&&n&&console.log("param: ",t),a&&o&&console.timeEnd("TIME: parallelReadData"),a&&n&&console.log("param.settings.waitForGlobalData before loops ",t.settings.waitForGlobalData),a&&n&&console.log("param.settings.dataReadFlag[0] before loops",t.settings.dataReadFlag[0]),t.settings.displayRecessions?b[0]?w(new Date,t.settings.maxWaitForGlobalData,v,t.settings.flagTestInterval,function(){t.usRecessions=ce(D,t.settings.recessionsFillColor,t.settings.recessionsOpacity),T(e,t,r,s)}):(t.usRecessions=ce(D,t.settings.recessionsFillColor,t.settings.recessionsOpacity),T(e,t,r,s)):T(e,t,r,s))})}function T(e,t,a,n){new Date,t.settings.waitForGlobalData?w(new Date,t.settings.maxWaitForGlobalData,t.settings.dataReadFlag,t.settings.flagTestInterval,function(){void 0!==t.settings.globalDataCallback&&"function"==typeof t.settings.globalDataCallback&&t.settings.globalDataCallback(),S(e,t,a,n)}):S(e,t,a,n)}function S(r,m,f,p){a&&n&&console.log("param.settings.dataReadFlag[0] after loops ",m.settings.dataReadFlag[0]),a&&n&&console.log("param.settings.waitForGlobalData after loops ",m.settings.waitForGlobalData),a&&n&&console.log("data before calculations: ",r),function(e,t){var n,o,r,s,i,l=t.otherDataProperties,g=!1,d=0,m=!1,y=-1,f=!1,p=!1;o=l.length;for(var h=0;h<o;h++)if(void 0!==l[h].calculate&&void 0!==l[h].calculate.type&&"poly"===l[h].calculate.type&&void 0!==l[h].calculate.polyFormulation){if(s=l[h].calculate.polyFormulation,a&&c&&console.log("polyFormulation",s),void 0!==s.argumentsIDs?d=s.argumentsIDs.length:(m=!0,console.log("should pass at least one trace argument to addCalculatedTracesWithFunctions")),a&&c&&console.log("numberOfArguments",d),i=void 0!==l[h].calculate.daysThreshold?l[h].calculate.daysThreshold:0,f=void 0!==s.passDate&&s.passDate,p=void 0!==l[h].calculate.evaluateAllDates&&l[h].calculate.evaluateAllDates,a&&u&&console.log("passDate: ",f),a&&c&&console.log("daysThreshold: ",i),d>0)for(r=[],n=0;n<d;n++)-1===(y=z(s.argumentsIDs[n],l))&&(m=!0,console.log("traceId not found:",s.argumentsIDs[n])),r.push(y);m||(p?M(e,r,s.formula,h,i,f):O(e,r,s.formula,h,i,f),!1===g&&(fe(e,"xOriginal","yOriginal"),g=!0))}}(r,m),a&&n&&console.log("calculated traces added "),function(e,t){var n,o,r,s=t.otherDataProperties,i=s.length,l={},g=!1,c=!1,u={},d=-1,m=!1;d=_e(s),a&&y&&console.log("iDeflactor: ",e);for(var f=0;f<i;f++)void 0!==s[f].calculate&&void 0!==s[f].calculate.type&&"real"===s[f].calculate.type&&(r=s[f].calculate,o=z(r.sourceTrace,s),m=!1,-1!==d&&-1!==o&&void 0!==e[o].x&&"[object Array]"===Object.prototype.toString.call(e[o].x)&&void 0!==e[o].y&&"[object Array]"===Object.prototype.toString.call(e[o].y)&&0!==e[o].x.length||(m=!0),m?(e[f].x=[],e[f].y=[]):(!1===c&&(fe(e,"xOriginal","yOriginal"),c=!0),g||(g=B(l,e,0,u,d),a&&y&&console.log("deflactorValuesCreated ",g)),Ge(n=C(r,s,e),l,e[d],0),R(e,l,n,0,o,f)))}(r,m),a&&n&&console.log("calculated real traces added "),function(e,t){for(var a=e.length,n=0;n<a;n++)void 0!==e[n].x&&void 0!==e[n].y||(e.splice(n,1),t.splice(n,1))}(r,m.otherDataProperties),function(e){var t=e.length;a&&n&&l&&console.log("data entering clean out data");for(var o=0;o<t;o++)(void 0===e[o].x||void 0===e[o].y||e[o].x.length<1||e[o].y.length<1||e[o].x.length!==e[o].y.length)&&e.splice(o,1)}(r),m.settings.waitForGlobalData||f||(m.settings.dataReadFlag[0]=!0),r.length<1&&f?function(e){for(var t=e.onErrorHideWholeDiv?e.wholeDivElement:e.plotDivElement;t.hasChildNodes();)t.removeChild(t.lastChild);e.onErrorHideWholeDiv&&(t.style.height=He(e.plotDivElement.style.height)+40+"px"),t.innerHTML=e.noLoadedDataMessage,ue(e.wholeDivElement),de(e.loaderElement)}(m.divInfo):f?(function(r,l){a&&o&&console.time("TIME: makeChart");var c,u,m,y="2000-01-01",f="2001-01-01",p=[],h=0,v=1,b={},D={},w={},A={},T={},S=[],E={},I=!1,F=0,q=!1,N=!1,k={yaxis:{type:"",hoverformat:""}},P=!1,O=!1,M=!1,C=!1;b=l.settings,D=l.options,w=l.layout,A=l.timeInfo,T=l.divInfo,S=l.otherDataProperties,k.yaxis.hoverformat=w.yaxis.hoverformat,k.yaxis.type=w.yaxis.type,void 0!==w.yaxis.tickformat&&(k.yaxis.tickformat=w.yaxis.tickformat),a&&o&&console.time("TIME: Save Original Data"),fe(r,"xOriginal","yOriginal"),a&&o&&console.timeEnd("TIME: Save Original Data");var B="460px";(b.allowCompare||b.allowLogLinear||b.allosFrequencyResampling)&&(B="480px");var R=document.getElementById(T.plotlyDivID),L=T.plotDivElement.style.height,Y=T.plotDivElement.style.width;T.plotDivElement.style.width=""===Y?"100%":Y,T.plotDivElement.style.height=""===L?B:L,R.style.width=T.plotDivElement.style.width,b.allowCompare||b.allowLogLinear||b.allowDownload?(T.footerDivElement.style.width=R.style.width,T.footerDivElement.style.height="23px",R.style.height=He(T.plotDivElement.style.height)-He(T.footerDivElement.style.height)+"px"):R.style.height=T.plotDivElement.style.height;var j=b.series.baseFrequency,_=b.series.baseAggregation;void 0!==b.changeFrequencyAggregationTo&&void 0!==b.changeFrequencyAggregationTo.frequency&&b.changeFrequencyAggregationTo.frequency;var X="1000-01-01",U="1000-01-01";a&&o&&console.time("getDataXminXmaxAsString");var z=be(r);a&&o&&console.timeEnd("getDataXminXmaxAsString"),a&&n&&console.log(z),X=z.min,U=z.max,b.displayRecessions&&(w.shapes=function(e,t,a){for(var n=new Date(t),o=new Date(a),r=[],s=0;s<e.length;s++)new Date(e[s].x1)>=n&&new Date(e[s].x0)<=o&&r.push(e[s]);return r}(l.usRecessions,X,U)),a&&n&&g&&console.log("recessions loaded");var V=function(e,t,a){var n,o,r=[],s=new Date,i=0;return n=e,void 0!==a.initialDateForInitialDisplay&&(n=ie(a.initialDateForInitialDisplay)),void 0===a.yearsToPlotBackFromCurrent&&void 0===a.yearsToPlot||(a.yearsToPlotBackFromCurrent>0||a.yearsToPlot>0)&&(i=a.yearsToPlotBackFromCurrent>0?a.yearsToPlotBackFromCurrent:a.yearsToPlot,s=new Date,n=ie(te(new Date(s.getFullYear()-i+"-"+(s.getMonth()+1)+"-"+s.getDate())))),void 0!==a.yearsToPlotBackFromMaximum&&a.yearsToPlotBackFromMaximum>0&&(i=a.yearsToPlotBackFromMaximum,s=new Date(t),n=ie(te(new Date(s.getFullYear()-i+"-"+(s.getMonth()+1)+"-"+s.getDate())))),o=t,(void 0!==a.yearsToPlotBackFromCurrent||void 0!==a.yearsToPlot)&&(s=new Date,o=ie(te(s))),void 0!==a.endDateForInitialDisplay&&(o=ie(a.endDateForInitialDisplay)),d&&console.log("endDate before forecast months calcs: ",o),void 0!==a.forecastMonthsFromCurrentDate&&a.forecastMonthsFromCurrentDate>0&&(s=new Date,s=new Date(s.setMonth(s.getMonth()+a.forecastMonthsFromCurrentDate)),o=ie(te(s)),d&&console.log("endDate after forecast months calcs: ",o)),r.push(n),r.push(o),r}(X,U,A);a&&n&&console.log("xaxisRange",V);var K=V[0],Z=V[1];w.xaxis.range=[K,Z];var Q=jQuery(R).width(),$=Q;!function(e,t,a){void 0===e.margin&&(e.margin={}),void 0===e.margin.l&&(e.margin.l=t),void 0===e.margin.r&&(e.margin.r=a)}(w,15,35);var ee=document.createElement("canvas"),ae=b.textAndSpaceToTextRatio,ne=w.xaxis.tickfont.family,oe=w.xaxis.tickfont.size,re=w.margin.l,se=w.margin.r;a&&o&&console.time("TIME: ticktextAndTickvals");var le=t.getTicktextAndTickvals(K,Z,ae,j,ne,oe,$,re,se,ee);a&&o&&console.timeEnd("TIME: ticktextAndTickvals"),w.xaxis.ticktext=le.ticktext,w.xaxis.tickvals=le.tickvals;var ce=K;b.allowFrequencyResampling&&(function(e,t,a){for(var n=0;n<e.length;n++)t.push(e[n]);a.updatemenus=t}(l.frequencyUpdateMenu,[],w),O||(a&&n&&console.log("start TransformSeriesByFrequencies"),a&&o&&console.time("TIME: transformSeriesByFrequencies"),function(e,t,n){var o,r,i,l,g,c,u,d,m,y=0,f=0,p=e.length,h={},x="",v=0,b=0,D={},w={},A={},T={},S=!0,E="",I="",F=[],q=[],N=[],k=[],P=!1,O=[],M=[],C=0,B=J,R=W,L=G;for(E in a&&s&&console.log("originalPeriodKeys",t),t)t.hasOwnProperty(E)&&t[E]&&(k.push(E),P=!0);var Y=k.length;F.length=Y,q.length=Y,N.length=Y,O.length=Y,M.length=Y;for(var j=0;j<p;j++)if(S=!0,l=e[j].xOriginal,g=e[j].yOriginal,a&&s&&console.log("i: ",j,"DataIXO: ",l),a&&s&&console.log("DataIYO: ",g),o=l.length,P){for(f=0;f<Y;f++)E=k[f],F[f]="undefined",q[f]=0,O[f]=0,M[f]=o-1;for(a&&s&&console.time("Data "+j),y=o-1;y>-1;y--){if(x=l[y],h=H(x),r=S?"undefined":l[y+1],i=y>0?l[y-1]:"undefined",v=Number(g[y]),void 0===D[x]&&(D[x]=B(h.year,h.month,h.day)),void 0===w[x]&&(w[x]=R(h.year,h.month,h.day)),S){for(void 0===T[x]&&(T[x]=L(h.year,h.month,h.day,n)),T[x],f=0;f<Y;f++)N[f]={sum:0,n:0,calculate:!1};S=!1}for(void 0===T[x]&&(T[x]=L(h.year,h.month,h.day,n)),A=T[x],f=0;f<Y;f++)if(E=k[f],u=N[f],d=A.begins[E],m=A.ends[E],(r<d||D[x]<d)&&(u.calculate=!0),u.calculate&&(u.sum=Number(u.sum)+v,u.n=Number(u.n)+1),"undefined"!=i&&i>=m||w[x]>=m){if(void 0===e[j][E])for(I in e[j][E]={x:[],close:[],average:[],change:[],percChange:[],sqrPercChange:[],cumulative:[]},e[j][E])e[j][E].hasOwnProperty(I)&&(e[j][E][I].length=o);c=e[j][E],C=M[f],c.x[C]=A.label[E],u.calculate?(c.average[C]=u.sum/u.n,u.sum=0,u.n=0,u.calculate=!1):c.average[C]="N/A",c.close[C]=v,c.cumulative[C]=q[f]+v,"undefined"!==F[f]?(b=v-F[f],c.change[C]=b,b=0!==F[f]?b/F[f]:"N/A",c.percChange[C]=b,c.sqrPercChange[C]="N/A"!=b?b*b:"N/A"):(c.change[C]="N/A",c.percChange[C]="N/A",c.sqrPercChange[C]="N/A"),M[f]--,O[f]++,F[f]=v,q[f]=q[f]+v}}for(a&&s&&console.timeEnd("Data "+j),a&&s&&console.time("spliceArrays "+j),f=0;f<Y;f++)for(I in E=k[f],c=e[j][E])c.hasOwnProperty(I)&&c[I].splice(0,o-O[f]);a&&s&&console.timeEnd("spliceArrays "+j),a&&s&&console.log("data[i].2.x",e[j][k[2]].x)}}(r,b.periodKeys,b.endOfWeek),a&&o&&console.timeEnd("TIME: transformSeriesByFrequencies"),O=!0,a&&o&&console.time("TIME: processFrequenciesDates"),function(e,t){for(var a,n="",o=0,r=0,s=e.length,i=(new Date).getTimezoneOffset(),l=" 00:00:00"+(i>0?"-"+ge(i):"+"+ge(-i)),g=0;g<s;g++)for(n in t)if(t.hasOwnProperty(n)&&!0===t[n])for(a=e[g][n].x,r=a.length,o=0;o<r;o++)a[o]+=l}(r,b.periodKeys),a&&o&&console.timeEnd("TIME: processFrequenciesDates"))),b.allowLogLinear&&T.logLinearButtonElement.addEventListener("click",function(){Plotly.relayout(T.plotlyDivElement,{changeYaxisTypeToLog:"log"!==w.yaxis.type})},!1),b.allowRealNominal&&T.realNominalButtonElement.addEventListener("click",function(){Plotly.relayout(T.plotlyDivElement,{transformToReal:!N})},!1);var xe=_e(S);Xe(r,E,b.periodKeys,xe),N=void 0!==b.initialRealNominal&&"real"===b.initialRealNominal;var Fe="",qe="";if(a&&o&&console.time("TIME: transformToReal"),N&&(Fe=ze(b.baseRealDate,w.xaxis.range[0],w.xaxis.range[1],X,U),a&&n&&console.log("baseRealNominalDate",Fe),Ge(Fe,E,r[xe],0),C=function(e,t,a,n,o){return e||(pe(t,"nominal"),e=!0),Ve(t,a,n,o),e}(C,r,E,Fe,S)),a&&o&&console.timeEnd("TIME: transformToReal"),a&&n&&console.log("data as real passed"),q=b.transformToBaseIndex,a&&o&&console.time("TIME: transformToBaseIndex"),q&&(M=Ce(M,r,ce,b.allowCompare,0,b.series.baseAggregation)),a&&o&&console.timeEnd("TIME: transformToBaseIndex"),b.allowCompare&&T.compareButtonElement.addEventListener("click",function(){Plotly.relayout(T.plotlyDivElement,{compare:!q})},!1),a&&n&&console.log("allow compare functionality added"),Pe(w,r,b.numberOfIntervalsInYAxis,b.possibleYTickMultiples,b.rangeProportion),b.allowFrequencyResampling){var ke=we($,w,b.widthOfRightItemsFrequencyButtons);!0===w.updatemenus[De(w.updatemenus,"aggregation")].visible?(Ae(ke,w.updatemenus,"frequencies"),Ae(Te($,w),w.updatemenus,"aggregation")):Ae(Te($,w),w.updatemenus,"frequencies")}b.allowSelectorOptions&&(w.xaxis.rangeselector=l.selectorOptions,function(e,t){var a=Te(e,t);t.xaxis.rangeselector.x=a}($,w)),a&&n&&console.log("selector options loaded"),a&&o&&console.time("TIME: Execute Plotly.newPlot"),Plotly.newPlot(R,r,w,D).then(function(){ue(l.divInfo.wholeDivElement),de(l.divInfo.loaderElement),a&&o&&console.timeEnd("TIME: Execute Plotly.newPlot")}),e.addEventListener("resize",function(){Plotly.Plots.resize(R)}),a&&n&&console.log("start relayout handler");var Be=[];R.on("plotly_relayout",function(e){var s;a&&o&&console.time("TIME: relayout"),!0===e.autosize?($=jQuery(R).width(),a&&i&&console.log("divWidth: ",$),$!=Q&&(Q=$,Be={},b.allowFrequencyResampling&&(ke=we($,w,b.widthOfRightItemsFrequencyButtons),c=Te($,w),a&&i&&console.log("divWidth: ",$,"newX: ",ke,"widthOfRighItemx",b.widthOfRightItemsFrequencyButtons,"newXRight",c),u=De(w.updatemenus,"frequencies"),m=De(w.updatemenus,"aggregation"),a&&i&&console.log("index of frequencyMenu",u),a&&i&&console.log("index of aggregationMenus",m),w.updatemenus[m].visible?(Be["updatemenus["+u+"].x"]=ke,Be["updatemenus["+m+"].x"]=c):Be["updatemenus["+u+"].x"]=c),b.allowSelectorOptions&&(ke=Te($,w),Be["xaxis.rangeselector.x"]=ke),le=t.getTicktextAndTickvals(K,Z,ae,j,ne,oe,$,re,se,ee),Be["xaxis.tickvals"]=le.tickvals,Be["xaxis.ticktext"]=le.ticktext,Plotly.relayout(R,Be))):void 0!==e.myFrequency?(I=!1,e.myFrequency!==j&&((!1===I&&j===b.series.baseFrequency&&"normal"===b.series.baseFrequencyType&&e.myFrequency!==b.series.baseFrequency&&_===b.series.baseAggregation&&"normal"===b.series.baseAggregationType||j!==b.series.baseFrequency&&e.myFrequency!==b.series.baseFrequency)&&(I=!0,me(r,b.period[e.myFrequency],_)),!1===I&&j===b.series.baseFrequency&&"normal"===b.series.baseFrequencyType&&e.myFrequency!==b.series.baseFrequency&&_===b.series.baseAggregation&&"normal"!==b.series.baseAggregationType&&(I=!0,_="close",me(r,b.period[e.myFrequency],_),F=De(w.updatemenus,"aggregation"),w.updatemenus[F].buttons=b.baseAggregationButtons,w.updatemenus[F].showactive=!0,w.updatemenus[F].active=Ie(_,w.updatemenus[F].buttons)),!1===I&&j===b.series.baseFrequency&&"normal"!==b.series.baseFrequencyType&&e.myFrequency!==b.series.baseFrequency&&"normal"===b.series.baseAggregationType&&(I=!0,me(r,b.period[e.myFrequency],_),F=De(w.updatemenus,"aggregation"),w.updatemenus[F].buttons=b.baseAggregationButtons,w.updatemenus[F].active=Ie(_,w.updatemenus[F].buttons),w.updatemenus[F].visible=!0,w.updatemenus[F].type="dropdown",w.updatemenus[F].showactive=!0),!1===I&&j===b.series.baseFrequency&&"normal"!==b.series.baseFrequencyType&&e.myFrequency!==b.series.baseFrequency&&"normal"!==b.series.baseAggregationType&&(I=!0,_="close",F=De(w.updatemenus,"aggregation"),w.updatemenus[F].buttons=b.baseAggregationButtons,w.updatemenus[F].showactive=!0,w.updatemenus[F].active=Ie(_,w.updatemenus[F].buttons),w.updatemenus[F].visible=!0,w.updatemenus[F].type="dropdown","not available"===b.series.baseAggregationType&&(ke=we($,w,b.widthOfRightItemsFrequencyButtons),F=De(w.updatemenus,"frequencies"),w.updatemenus[F].x=ke,F=De(w.updatemenus,"aggregation"),w.updatemenus[F].x=Te($,w)),me(r,b.period[e.myFrequency],_)),!1===I&&j!==b.series.baseFrequency&&e.myFrequency===b.series.baseFrequency&&"normal"!==b.series.baseFrequencyType&&"not available"===b.series.baseAggregationType&&(I=!0,_=b.series.baseAggregation,F=De(w.updatemenus,"aggregation"),w.updatemenus[F].visible=!1,Ae(Te($,w),w.updatemenus,"frequencies"),he(r,"xOriginal","yOriginal"),je(w,k,T),q!==b.transformToBaseIndex&&(q=b.transformToBaseIndex,b.allowCompare&&Se(q,T.compareButtonElement)),w.yaxis.hoverformat=k.yaxis.hoverformat,void 0!==w.yaxis.tickformat&&void 0===k.yaxis.tickformat?delete w.yaxis.tickformat:void 0!==k.yaxis.tickformat&&(w.yaxis.tickformat=k.yaxis.tickformat)),!1===I&&j!==b.series.baseFrequency&&e.myFrequency===b.series.baseFrequency&&"normal"!==b.series.baseFrequencyType&&"not available"!==b.series.baseAggregationType&&(I=!0,_=b.series.baseAggregation,F=De(w.updatemenus,"aggregation"),w.updatemenus[F].buttons=b.singleAggregationButton,w.updatemenus[F].active=0,w.updatemenus[F].visible=!0,w.updatemenus[F].type="buttons",w.updatemenus[F].showactive=!1,he(r,"xOriginal","yOriginal"),je(w,k,T),q!==b.transformToBaseIndex&&(q=b.transformToBaseIndex,b.allowCompare&&Se(q,T.compareButtonElement)),w.yaxis.hoverformat=k.yaxis.hoverformat,void 0!==w.yaxis.tickformat&&void 0===k.yaxis.tickformat?delete w.yaxis.tickformat:void 0!==k.yaxis.tickformat&&(w.yaxis.tickformat=k.yaxis.tickformat)),!1===I&&j!==b.series.baseFrequency&&e.myFrequency===b.series.baseFrequency&&"normal"===b.series.baseFrequencyType&&_===b.series.baseAggregation&&(I=!0,he(r,"xOriginal","yOriginal"),"normal"!==b.series.baseAggregationType&&(_=b.series.baseAggregation,je(w,k,T),q!==b.transformToBaseIndex&&(q=b.transformToBaseIndex,b.allowCompare&&Se(q,T.compareButtonElement)),"not available"===b.series.baseAggregationType&&(F=De(w.updatemenus,"aggregation"),w.updatemenus[F].visible=!1,Ae(Te($,w),w.updatemenus,"frequencies")),"custom"===b.series.baseAggregationType&&(F=De(w.updatemenus,"aggregation"),w.updatemenus[F].active=0,w.updatemenus[F].visible=!0,w.updatemenus[F].buttons=b.singleAggregationButton,w.updatemenus[F].type="buttons",w.updatemenus[F].showactive=!1))),!1===I&&j!==b.series.baseFrequency&&e.myFrequency===b.series.baseFrequency&&"normal"===b.series.baseFrequencyType&&_!==b.series.baseAggregation&&(I=!0,me(r,b.period[e.myFrequency],_),"custom"===b.series.baseAggregationType&&(F=De(w.updatemenus,"aggregation"),w.updatemenus[F].buttons=b.combinedAggregationButtons,w.updatemenus[F].showactive=!0,w.updatemenus[F].active=Ie(_,w.updatemenus[F].buttons)),"normal"!==b.series.baseAggregationType&&(F=De(w.updatemenus,"aggregation"),w.updatemenus[F].buttons=b.combinedAggregationButtons,w.updatemenus[F].showactive=!0,w.updatemenus[F].active=Ie(_,w.updatemenus[F].buttons))),!1===I&&j===b.series.baseFrequency&&"normal"===b.series.baseFrequencyType&&e.myFrequency!==b.series.baseFrequency&&_!==b.series.baseAggregation&&(I=!0,me(r,b.period[e.myFrequency],_),F=De(w.updatemenus,"aggregation"),w.updatemenus[F].buttons=b.baseAggregationButtons,w.updatemenus[F].showactive=!0,w.updatemenus[F].active=Ie(_,w.updatemenus[F].buttons)),I&&(j=e.myFrequency,M=!1,z=be(r),X=z.min,U=z.max,Ne(K,Z,X,U,w.xaxis.range),le=t.getTicktextAndTickvals(K,Z,ae,j,ne,oe,$,re,se,ee),w.xaxis.tickvals=le.tickvals,w.xaxis.ticktext=le.ticktext,pe(r,"nominal"),C=!0,N&&((qe=ze(b.baseRealDate,w.xaxis.range[0],w.xaxis.range[1],X,U))!==Fe&&Ge(Fe=qe,E,r[xe],0),Ve(r,E,Fe,S)),q&&(ce<K&&(ce=K),M=Ce(M,r,ce,b.allowCompare,0,_)),Pe(w,r,b.numberOfIntervalsInYAxis,b.possibleYTickMultiples,b.rangeProportion),b.updatemenus=w.updatemenus,Plotly.relayout(R,{updatemenus:[{}]}),w.updatemenus=b.updatemenus,Plotly.redraw(R)))):void 0!==e.myAggregation?(I=!1,e.myAggregation!==_&&(j===b.series.baseFrequency&&"normal"===b.series.baseFrequencyType&&e.myAggregation===b.series.baseAggregation&&(I=!0,he(r,"xOriginal","yOriginal")),(j===b.series.baseFrequency&&"normal"===b.series.baseFrequencyType&&e.myAggregation!==b.series.baseAggregation||j!==b.series.baseFrequency&&e.myAggregation!==b.series.baseAggregation||j!==b.series.baseFrequency&&e.myAggregation===b.series.baseAggregation&&"normal"===b.series.baseAggregationType)&&(I=!0,me(r,b.period[j],e.myAggregation)),I&&(M=!1,w.yaxis.hoverformat=k.yaxis.hoverformat,void 0!==w.yaxis.tickformat&&void 0===k.yaxis.tickformat?delete w.yaxis.tickformat:void 0!==k.yaxis.tickformat&&(w.yaxis.tickformat=k.yaxis.tickformat),pe(r,"nominal"),C=!0,N&&((qe=ze(b.baseRealDate,w.xaxis.range[0],w.xaxis.range[1],X,U))!==Fe&&Ge(Fe=qe,E,r[xe],0),Ve(r,E,Fe,S)),"percChange"!==e.myAggregation&&"sqrPercChange"!==e.myAggregation||(q=!1,b.allowCompare&&Se(q,T.compareButtonElement),w.yaxis.tickformat=".2p",w.yaxis.hoverformat=".3p"),"percChange"!==_&&"sqrPercChange"!==_||"percChange"===e.myAggregation||"sqrPercChange"===e.myAggregation||q!==b.transformToBaseIndex&&(q=b.transformToBaseIndex,b.allowCompare&&Se(q,T.compareButtonElement)),"percChange"!==e.myAggregation&&"sqrPercChange"!==e.myAggregation&&"change"!==e.myAggregation||"log"===w.yaxis.type&&(w.yaxis.type="linear",b.allowLogLinear&&Ee(!1,T.logLinearButtonElement)),"percChange"!==_&&"sqrPercChange"!==_&&"change"!==_||"percChange"===e.myAggregation||"sqrPercChange"===e.myAggregation||"change"===e.myAggregation||je(w,k,T),_=e.myAggregation,z=be(r),X=z.min,U=z.max,Ne(K,Z,X,U,w.xaxis.range),le=t.getTicktextAndTickvals(K,Z,ae,j,ne,oe,$,re,se,ee),w.xaxis.tickvals=le.tickvals,w.xaxis.ticktext=le.ticktext,q&&(ce<K&&(ce=K),M=Ce(M,r,ce,b.allowCompare,0,_)),Pe(w,r,b.numberOfIntervalsInYAxis,b.possibleYTickMultiples,b.rangeProportion),b.updatemenus=w.updatemenus,Plotly.relayout(R,{updatemenus:[{}]}),w.updatemenus=b.updatemenus,Plotly.redraw(R)))):void 0!==e.changeYaxisTypeToLog?(!1===e.changeYaxisTypeToLog&&(T.logLinearButtonElement.blur(),"log"===w.yaxis.type&&(P||(w.yaxis.type="linear",Ee(!1,T.logLinearButtonElement),w.yaxis.type="linear",Pe(w,r,b.numberOfIntervalsInYAxis,b.possibleYTickMultiples,b.rangeProportion),Plotly.redraw(R).then(()=>{P=!1})),P=!0)),!0===e.changeYaxisTypeToLog&&(T.logLinearButtonElement.blur(),"linear"===w.yaxis.type&&"percChange"!==_&&"sqrPercChange"!==_&&"change"!==_&&(P||(w.yaxis.type="log",Ee(!0,T.logLinearButtonElement),Pe(w,r,b.numberOfIntervalsInYAxis,b.possibleYTickMultiples,b.rangeProportion),Plotly.redraw(R).then(()=>{P=!1})),P=!0))):void 0!==e.compare?(T.compareButtonElement.blur(),e.compare!==q&&"percChange"!==_&&"sqrPercChange"!==_&&(P||(q=!q,Se(e.compare,T.compareButtonElement),q?(C||N||(pe(r,"nominal"),C=!0),ce=ie(w.xaxis.range[0]),M=Ce(M,r,ce,b.allowCompare,0,_),w.yaxis.autorange||Pe(w,r,b.numberOfIntervalsInYAxis,b.possibleYTickMultiples,b.rangeProportion)):(ye(r,"uncompared"),w.yaxis.autorange||Pe(w,r,b.numberOfIntervalsInYAxis,b.possibleYTickMultiples,b.rangeProportion)),Plotly.redraw(R).then(()=>{P=!1})),P=!0)):void 0!==e.transformToReal?(a&&n&&console.log("real/nominal button clicked"),T.realNominalButtonElement.blur(),e.transformToReal!==N&&(P||(N=!N,s=e.transformToReal,T.realNominalButtonElement.textContent=x(s?"real":"nominal"),N?(a&&n&&console.log("transform To Real"),a&&n&&console.log("baseRealNominalDate",Fe),""===Fe&&(Fe=ze(b.baseRealDate,w.xaxis.range[0],w.xaxis.range[1],X,U),a&&n&&console.log("baseRealNominalDate",Fe),Ge(Fe,E,r[xe],0)),q||C||(pe(r,"nominal"),C=!0),q&&ye(r,"nominal"),Ve(r,E,Fe,S),q&&(M=Ce(M=!1,r,ce,b.allowCompare,0,_)),w.yaxis.autorange||Pe(w,r,b.numberOfIntervalsInYAxis,b.possibleYTickMultiples,b.rangeProportion)):(ye(r,"nominal"),q&&(M=Ce(M=!1,r,ce,b.allowCompare,0,_)),w.yaxis.autorange||Pe(w,r,b.numberOfIntervalsInYAxis,b.possibleYTickMultiples,b.rangeProportion)),Plotly.redraw(R).then(()=>{P=!1})),P=!0)):void 0!==e.download?(T.downloadButtonElement.blur(),function(e,t,a){var n=function(e,t){for(var a="",n="",o=!0,r=t.length,s=0,i=0;i<r;i++)""!==n&&(n+=","),n+=e+","+t[i].name;a+=n+="\r\n",s=0;do{for(o=!0,i=0;i<r;i++)void 0!==t[i].x[s]&&(o=!1);if(n="",!o){for(i=0;i<r;i++)void 0!==t[i].x[s]?(""!==n&&(n+=","),n+=t[i].x[s]+","+t[i].y[s]):(""!==n&&(n+=","),n+=",");a+=n+"\r\n"}s+=1}while(!o);return a}(e,t),o=(a||"export")+".csv",r=new Blob([n],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(r,o);else{var s=document.createElement("a");if("undefined"!==s.download){var i=URL.createObjectURL(r);s.setAttribute("href",i),s.setAttribute("download",o),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}}(b.xAxisNameOnCSV,r,b.downloadedFileName)):!0===e["xaxis.autorange"]?(w.xaxis.range[0]=ie(w.xaxis.range[0]),w.xaxis.range[1]=ie(w.xaxis.range[1]),w.xaxis.range[0]===K&&w.xaxis.range[1]===Z||(P||(K=ie(w.xaxis.range[0]),Z=ie(w.xaxis.range[1]),le=t.getTicktextAndTickvals(K,Z,ae,j,ne,oe,$,re,se,ee),I=!1,N&&(ye(r,"nominal"),(qe=ze(b.baseRealDate,w.xaxis.range[0],w.xaxis.range[1],X,U))!==Fe&&Ge(Fe=qe,E,r[xe],0),Ve(r,E,Fe,S),q&&(I=!0,pe(r,"uncompared"))),(q&&ce!==ie(w.xaxis.range[0])||I)&&Me(r,ie(w.xaxis.range[0]),_),ce=ie(w.xaxis.range[0]),p=ve(ie(w.xaxis.range[0]),ie(w.xaxis.range[1]),r),h=p[0],v=p[1],isNaN(h)||isNaN(v)||(w.yaxis.autorange=!1,w.yaxis.range=Oe("log"===w.yaxis.type?"log":"linear",h,v,b.numberOfIntervalsInYAxis,b.possibleYTickMultiples,b.rangeProportion)),w.xaxis.tickvals=le.tickvals,w.xaxis.ticktext=le.ticktext,function(e,t,a){for(var n=a.length,o=0;o<n;o++)void 0!==a[o][e]&&a[o][e]===t&&(a[o].active=!0,o=n)}("step","all",w.xaxis.rangeselector.buttons),Plotly.redraw(R).then(()=>{P=!1})),P=!0)):(I=!1,void 0!==e["xaxis.range[0]"]||void 0!==e["xaxis.range[1]"]?(y=void 0!==e["xaxis.range[0]"]?e["xaxis.range[0]"]:w.xaxis.range[0],f=void 0!==e["xaxis.range[1]"]?e["xaxis.range[1]"]:w.xaxis.range[1],I=!0):void 0!==e["xaxis.range"]&&(y=e["xaxis.range"][0],f=e["xaxis.range"][1],I=!0),!0===I&&(P||(w.xaxis.range[0]=y,w.xaxis.range[1]=f,I=!1,N&&(ye(r,"nominal"),(qe=ze(b.baseRealDate,w.xaxis.range[0],w.xaxis.range[1],X,U))!==Fe&&Ge(Fe=qe,E,r[xe],0),Ve(r,E,Fe,S),q&&(I=!0,pe(r,"uncompared"))),(q&&ce!==y||I)&&Me(r,y,_),ce=y,p=ve(y,f,r),h=p[0],v=p[1],K=y,Z=f,le=t.getTicktextAndTickvals(K,Z,ae,j,ne,oe,$,re,se,ee),isNaN(h)||isNaN(v)||(w.yaxis.autorange=!1,w.yaxis.range=Oe("log"===w.yaxis.type?"log":"linear",h,v,b.numberOfIntervalsInYAxis,b.possibleYTickMultiples,b.rangeProportion)),w.xaxis.tickvals=le.tickvals,w.xaxis.ticktext=le.ticktext,Plotly.redraw(R).then(()=>{P=!1})),P=!0)),a&&o&&console.timeEnd("TIME: relayout")}),a&&o&&console.timeEnd("TIME: makeChart"),a&&o&&console.timeEnd("TIME: newTimeseriesPlot")}(r,m),a&&n&&console.log("allread and ploted"),a&&n&&g&&console.log("param.settings.newRecessionsUrl: ",m.settings.newRecessionsUrl)):(a&&n&&console.log("all data read and processed"),p())}function E(e,t,o){var r={responseType:"arraybuffer",method:"GET",async:!0,url:e};a&&n&&g&&console.log("XMLHttpRequestOptions",r),""!==r.url?(a&&n&&g&&console.log("calling wrappedDirectXMLHttpRequest"),function(e,t,o){var r=new XMLHttpRequest;r.responseType=e.responseType,a&&n&&console.log("XMLHttpRequest options: ",e),r.open(e.method,e.url,e.async),r.send(),r.onreadystatechange=function(){a&&n&&console.log("readyState= ",r.readyState),a&&n&&console.log("status= ",r.status),4==r.readyState&&(200==r.status?(a&&n&&g&&console.log("calling function(http, callback){ afterFredZipFileLoaded((xhttp, usRecessions, callback))}"),t(r,o)):o(null))}}(r,function(e){return function(t,o){return function(e,t,o){a&&n&&g&&console.log("afterFredZipFileLoaded started"),a&&n&&g&&console.log("passed xhttp:",e),(new JSZip).loadAsync(e.response).then(function(e){return e.file("USRECP_1.txt").async("string")}).then(function(e){a&&n&&g&&console.log("readTxt",e);var r=function(e,t,o){var r=0,s=0,i=0,l=[],g=[],c=0,u=e.split(t);a&&n&&console.log(u);var d=u[0].split(o);i=u.length-1,s=d.length,l.length=i,c=0;for(var m=0;m<i;m++)if((g=u[m+1].split(o)).length===s)for(c++,l[m]={},r=0;r<s;r++)l[m][d[r]]=g[r];return l.length=c,a&&n&&console.log(l),l}(e,"\r\n","\t"),s=function(e){for(var t=e.length,o=!0,r=!1,s="",i=[],l=0,g=0;g<t;g++)o?"1"===e[g].USRECP&&(i.push({}),i[l].x0=e[g].observation_date,o=!1,r=!0):r&&"0"===e[g].USRECP&&(s=ae(e[g].observation_date),i[l].x1=s,o=!0,r=!1,l++);return r&&(recession[l].x1=ne(new Date)),a&&n&&console.log(i),i}(r);!function(e,t){var o,r=t.length-1,s=e.length,i=s,l=0,c=new Date(t[r].x0);a&&n&&g&&console.log("recessionsArray: ",e),a&&n&&g&&console.log("lastRecessionInBaseEndedAsDate",c);for(var u=0;u<s;u++)a&&n&&g&&console.log("recessionsArray[i][x0]: ",e[u].x0),new Date(e[u].x0)>c&&(i=u,u=s);for(l=r,u=i;u<s;u++){for(o in t.push({}),t[l])t[l].hasOwnProperty(o)&&(t[l+1][o]=t[l][o]);t[++l].x0=e[u].x0,t[l].x1=e[u].x1}}(s,t),a&&n&&g&&console.log("usRecessions: ",t),o(null)})}(t,e,o)}}(t),o)):o(null)}function I(e,t,s,i){setTimeout(function(e,t,s,i){var g=s.dataSources[t].urlType,c=s.dataSources[t].url,u="";"csv"===g?Plotly.d3.csv(c,function(l,g){a&&n&&console.log("csv",t),l?(a&&n&&console.log("error reading CsvData",t),g="",i(null)):F(g)&&(a&&r&&console.log("readData "+t+" readDate.length: ",g.length),a&&o&&console.timeEnd("Time Read File "+t),a&&o&&console.time("Time ProcessCsvData "+t),q(g,e,s.timeInfo.tracesInitialDate,s.timeInfo.tracesEndDate,s.otherDataProperties,s.dataSources[t],i))}):"arrayOfJsons"===g?(a&&n&&console.log("arrayOfJsons",t),q(s.dataSources[t].arrayOfJsons,e,s.timeInfo.tracesInitialDate,s.timeInfo.tracesEndDate,s.otherDataProperties,s.dataSources[t],i)):"yqlJson"===g?(a&&n&&console.log("yqlJson",t),Plotly.d3.json(c,function(o,r){o?(a&&n&&console.log("error reading yqlJson",t),r="",i(null)):void 0!==r.query&&void 0!==r.query.results&&void 0!==r.query.results.json&&void 0!==r.query.results.json.observations&&F(r=r.query.results.json.observations)&&q(r,e,s.timeInfo.tracesInitialDate,s.timeInfo.tracesEndDate,s.otherDataProperties,s.dataSources[t],i)})):"yqlGoogleCSV"===g?(a&&n&&console.log("yqlGoogleCSV",t),u="https://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent("SELECT * from csv where url='"+c+"'")+"&format=json",Plotly.d3.json(u,function(o,r){o?(a&&n&&console.log("error reading yqlJson",t),r="",i(null)):void 0!==r.query&&void 0!==r.query.results&&void 0!==r.query.results.row&&F(r=r.query.results.row)&&q(r,e,s.timeInfo.tracesInitialDate,s.timeInfo.tracesEndDate,s.otherDataProperties,s.dataSources[t],i)})):"pureJson"===g?(a&&n&&console.log("pureJson",t),Plotly.d3.json(c,function(o,r){o?(a&&n&&console.log("error reading yqlJson",t),r="",i(null)):F(r)&&q(r,e,s.timeInfo.tracesInitialDate,s.timeInfo.tracesEndDate,s.otherDataProperties,s.dataSources[t],i)})):"EiaJson"===g?(a&&n&&console.log("EiaJson",t),Plotly.d3.json(c,function(o,r){o?(a&&n&&console.log("Plotly.d3.json returned error reading EiaData",t),r="",i(null)):(a&&n&&l&&console.log("read EiaJson",r),void 0!==r.series&&F(r=r.series)&&function(e,t,o,r,s,i,g){var c=se(),u=new Date("0001-01-01"),d=new Date("9998-01-01"),m={},y=le;if(a&&n&&console.log(e),""!==o&&(u=new Date(y(o,c))),""!==r&&(d=new Date(y(r,c))),i.traces.length<1)return!1;Q(m,i),function(e){for(var t,o=se(),r={},s=e.length,i=0,g=0;g<s;g++){if(r=e[g],t=r.data.length,"M"===r.f)for(r.hasOwnProperty("lastHistoricalPeriod")&&(a&&n&&l&&console.log(r.lastHistoricalPeriod.substr(0,4)+"-"+r.lastHistoricalPeriod.substr(4,2)+"-01 00:00:00.000"+o),r.lastHistoricalPeriod=re(r.lastHistoricalPeriod.substr(0,4)+"-"+r.lastHistoricalPeriod.substr(4,2)+"-01 00:00:00.000"+o)),i=0;i<t;i++)r.data[i][0]=re(r.data[i][0].substr(0,4)+"-"+r.data[i][0].substr(4,2)+"-01 00:00:00.000"+o);if("A"===r.f)for(r.hasOwnProperty("lastHistoricalPeriod")&&(r.lastHistoricalPeriod+="-12-31 00:00:00.000"+o),i=0;i<t;i++)r.data[i][0]+="-12-31 00:00:00.000"+o;if("D"===r.f||"W"===r.f)for(r.hasOwnProperty("lastHistoricalPeriod")&&(r.lastHistoricalPeriod=r.lastHistoricalPeriod.substr(0,4)+"-"+r.lastHistoricalPeriod.substr(4,2)+"-"+r.lastHistoricalPeriod.substr(6,2)+" 00:00:00.000"+o),i=0;i<t;i++)r.data[i][0]=r.data[i][0].substr(0,4)+"-"+r.data[i][0].substr(4,2)+"-"+r.data[i][0].substr(6,2)+" 00:00:00.000"+o}}(e),function(e,t,o,r,s){var i,g,c,u,d,m,y,f,p,h,x,v=[],b=0,D="",w={},A="full",T="",S=1,E=0;for(var I in a&&n&&l&&console.log("start LoadEiaArrayDataIntoTableParm..."),a&&n&&l&&console.log("tableParams before loaded data",t),t)if(t.hasOwnProperty(I)){for(f=I,x=parseInt(I.substr(1)),a&&n&&l&&console.log("xSeriesName:",I,"   traceIndex:",x),w=o.traces[x],y=w.seriesIndex,i=e[y].data.length,(v=[]).length=i,a&&n&&l&&console.log("elements in serie:",i),w.hasOwnProperty("traceType")?("historical"===w.traceType&&(A="historical",T=e[y].lastHistoricalPeriod),"forecast"===w.traceType&&(A="forecast",T=e[y].lastHistoricalPeriod)):A="full","first"===t[I].firstItemToRead?(d=0,m=1):(d=i-1,m=-1),u=0,c=t[I].yNames.length,h=t[I].yNames,b=0;b<i;b++){if(""!==(D=e[y].data[d][0])&&null!==D&&new Date(D)>=r&&new Date(D)<=s&&("full"===A||"historical"===A&&D<=T||"forecast"===A&&D>=T)){for(v[u]={},v[u][f]=D,g=0;g<c;g++)p=h[g],t[I].yNames.indexOf(p)!=g&&console.log("j is not equalt to indexOfYSeriesName"),null===e[y].data[d][1]?v[u][p]="NaN":(S=t[I].factorArray[g],E=t[I].shiftArray[g],v[u][p]=e[y].data[d][1]*S+E);u++}d+=m}v.length=u,t[I].allRows=v}a&&n&&l&&console.log("tableParams after EIA data loaded",t)}(e,m,i,u,d),e=[],P(i,m,s,t,u,o,d,r,g)}(r,e,s.timeInfo.tracesInitialDate,s.timeInfo.tracesEndDate,s.otherDataProperties,s.dataSources[t],i))})):"WBJson"===g?(a&&n&&console.log("WBJson",t),Plotly.d3.json(c,function(o,r){var l;o?(console.log("Plotly.d3.json returned error reading WBData",t),r="",i(null)):(a&&n&&d&&console.log("read WBJson",r),l=r,Array.isArray(l)&&l.length>1&&void 0===l[0].message&&0!==l[0].page?(r.shift(),function(e){for(var t=e.length,a=0;a<t;a++)e[a]={data:e[a]}}(r),F(r)&&(function(e,t,o,r,s,i,l){var g=se(),c=new Date("0001-01-01"),u=new Date("9998-01-01"),m={},y=le;if(a&&n&&d&&console.log("wbArrayData entering processWBData: ",e),""!==o&&(c=new Date(y(o,g))),""!==r&&(u=new Date(y(r,g))),i.traces.length<1)return!1;Q(m,i),function(e){for(var t,o=se(),r={},s=e.length,i="",l=0,g=0;g<s;g++){for(r=e[g],t=r.data.length,l=0;l<t;l++)-1!==(i=r.data[l].date).search(/f/i)||(r.lastHistoricalPeriod=N(i,o),a&&n&&d&&console.log("wBLastHistoricalDate= ",r.lastHistoricalPeriod),l=t);for(l=0;l<t;l++)r.data[l].date=N(r.data[l].date,o)}}(e),function(e,t,o,r,s){var i,l,g,c,u,m,y,f,p,h,x,v=[],b=0,D="",w={},A="full",T="",S=1,E=0;for(var I in a&&n&&d&&console.log("start LoadWBArrayDataIntoTableParm..."),a&&n&&d&&console.log("tableParams before loaded data",t),t)if(t.hasOwnProperty(I)){for(f=I,x=parseInt(I.substr(1)),a&&n&&d&&console.log("xSeriesName:",I,"   traceIndex:",x),w=o.traces[x],y=w.seriesIndex,i=e[y].data.length,(v=[]).length=i,a&&n&&d&&console.log("elements in serie:",i),w.hasOwnProperty("traceType")?("historical"===w.traceType&&(A="historical",T=e[y].lastHistoricalPeriod),"forecast"===w.traceType&&(A="forecast",T=e[y].lastHistoricalPeriod)):A="full","first"===t[I].firstItemToRead?(u=0,m=1):(u=i-1,m=-1),c=0,g=t[I].yNames.length,h=t[I].yNames,b=0;b<i;b++){if(""!==(D=e[y].data[u].date)&&null!==D&&new Date(D)>=r&&new Date(D)<=s&&("full"===A||"historical"===A&&D<=T||"forecast"===A&&D>=T)){for(v[c]={},v[c][f]=D,l=0;l<g;l++)p=h[l],t[I].yNames.indexOf(p)!=l&&console.log("j is not equal to indexOfYSeriesName"),S=t[I].factorArray[l],E=t[I].shiftArray[l],v[c][p]=e[y].data[u].value*S+E;c++}u+=m}v.length=c,t[I].allRows=v}a&&n&&d&&console.log("tableParams after WB data loaded",t)}(e,m,i,c,u),e=[],P(i,m,s,t,c,o,u,r,l)}(r,e,s.timeInfo.tracesInitialDate,s.timeInfo.tracesEndDate,s.otherDataProperties,s.dataSources[t],i),a&&n&&console.log("process WBData",t,"finished"))):(console.log("World Bank data not read properly on WBJson:",t),r="",i(null)))})):"fredJson"===g&&(a&&n&&console.log("fredJson",t),Plotly.d3.json(c,function(o,r){o?(a&&n&&console.log("Plotly.d3.json returned error reading FredSeriesData",t),r="",i(null)):(a&&n&&l&&console.log("read fredJson",r),void 0!==r.observations&&F(r=r.observations)&&(q(r,e,s.timeInfo.tracesInitialDate,s.timeInfo.tracesEndDate,s.otherDataProperties,s.dataSources[t],i),a&&n&&console.log("process FredSeriesData",t,"finished")))}))}(e,t,s,i),s.settings.queueConcurrencyDelay)}function F(e){return a&&n&&console.log("readData entering checkDataIsAnArrayNotVoid",e),!!(Array.isArray(e)&&e.length>0)}function q(e,t,o,r,s,i,l){var g=i.urlType,c=void 0!==e[0]?e[0]:{},u=new Date("0001-01-01"),d=new Date("9998-01-01"),m=se(),y={};a&&n&&console.log("allRows entering processing csv: ",e);var f=le;if("yqlGoogleCSV"===g){if(!(e.length>1))return!1;if(!function(e,t){var a,n,o=e.traces.length,r=0;if(void 0!==e.xSeriesName)for(n in t)t.hasOwnProperty(n)&&t[n].toString().trim()===e.xSeriesName.toString()&&(e.xSeriesName=n);for(a=0;a<o;a++)for(n in t)t.hasOwnProperty(n)&&(t[n].toString().trim()===e.traces[a].xSeriesName.toString()&&(r++,e.traces[a].xSeriesName=n),t[n].toString().trim()===e.traces[a].ySeriesName.toString()&&(r++,e.traces[a].ySeriesName=n));return r===o+o}(i,c))return!1;e.shift()}if(void 0!==i.xSeriesName&&i.xSeriesName,""!==o&&(u=new Date(f(o,m))),""!==r&&(d=new Date(f(r,m))),a&&n&&console.log("initialDateAsDate",u),a&&n&&console.log("endDateAsDate",d),e.length,a&&n&&console.log("start preprocess"),function(e,t){for(var a=t.traces,n=a.length,o=e[0],r=0;r<n;r++)void 0!==o[a[r].xSeriesName]&&void 0!==o[a[r].ySeriesName]||(a.splice(r,1),n--)}(e,i),i.traces.length<1)return!1;!function(e,t){for(var a,n,o=t.traces,r=o.length,s=0;s<r;s++)a=o[s].xSeriesName,n=o[s].ySeriesName,e.hasOwnProperty(a)||(e[a]={},e[a].yNames=[],e[a].yCalculateAdjustedClose=[],e[a].factorArray=[],e[a].shiftArray=[]),-1===e[a].yNames.indexOf(n)&&(e[a].yNames.push(n),void 0!==t.calculateAdjustedClose?e[a].yCalculateAdjustedClose.push(t.calculateAdjustedClose):void 0!==o[s].calculateAdjustedClose?e[a].yCalculateAdjustedClose.push(o[s].calculateAdjustedClose):e[a].yCalculateAdjustedClose.push(!1),void 0!==o[s].factor?e[a].factorArray.push(o[s].factor):e[a].factorArray.push(1),void 0!==o[s].shift?e[a].shiftArray.push(o[s].shift):e[a].shiftArray.push(0)),void 0!==t.sort&&(e[a].sort=t.sort),void 0!==t.xDateSuffix&&(e[a].xDateSuffix=t.xDateSuffix),void 0!==t.firstItemToRead&&(e[a].firstItemToRead=t.firstItemToRead),void 0!==t.processDates&&(e[a].processDates=t.processDates),void 0!==t.postProcessDate&&(e[a].postProcessDate=t.postProcessDate),void 0!==t.onlyAddXDateSuffix&&(e[a].onlyAddXDateSuffix=t.onlyAddXDateSuffix),void 0!==o[s].sort?e[a].sort=o[s].sort:void 0===e[a].sort&&(e[a].sort=!1),void 0!==o[s].xDateSuffix?e[a].xDateSuffix=o[s].xDateSuffix:void 0===e[a].xDateSuffix&&(e[a].xDateSuffix=""),void 0!==o[s].firstItemToRead?e[a].firstItemToRead=o[s].firstItemToRead:void 0===e[a].firstItemToRead&&(e[a].firstItemToRead="first"),void 0!==o[s].processDates?e[a].processDates=o[s].processDates:void 0===e[a].processDates&&(e[a].processDates=!0),void 0!==o[s].postProcessDate&&(e[a].postProcessDate=o[s].postProcessDate),void 0!==o[s].onlyAddXDateSuffix&&(e[a].onlyAddXDateSuffix=o[s].onlyAddXDateSuffix)}(y,i),a&&n&&console.log("table params set: ",y),function(e,t,a){var n,o,r,s,i=e.length,l="",g=se(),c=!1,u=!1,d=le,m=re,y=oe;for(var f in"yqlGoogleCSV"===a&&(u=!0),t)if(t.hasOwnProperty(f)&&t[f].processDates)if(o=f,r=t[f].xDateSuffix,s=void 0!==t[f].onlyAddXDateSuffix&&t[f].onlyAddXDateSuffix,c=!1,void 0!==t[f].postProcessDate&&"end of month"===t[f].postProcessDate&&(c=!0),u)for(n=0;n<i;n++)""!==e[n][o]&&null!==e[n][o]&&(e[n][o]=d(""+y(e[n][o])+r,g));else if(c)for(n=0;n<i;n++)""!==e[n][o]&&null!==e[n][o]&&(l=d(""+e[n][o]+r,g),l=m(l),e[n][o]=l);else if(s)for(n=0;n<i;n++)""!==e[n][o]&&null!==e[n][o]&&(e[n][o]+=s);else for(n=0;n<i;n++)""!==e[n][o]&&null!==e[n][o]&&(e[n][o]=d(""+e[n][o]+r,g))}(e,y,g),a&&n&&console.log("data processing options applied"),a&&n&&console.log("allRows",e),function(e,t,a,n,o){var r,s,i,l,g,c,u,d=[],m=0,y=e.length,f="",p=1,h=0;for(var x in t)if(t.hasOwnProperty(x)){var v;for(c=x,(d=[]).length=y,"first"===t[x].firstItemToRead?(l=0,g=1):(l=y-1,g=-1),i=0,s=t[x].yNames.length,v=t[x].yNames,m=0;m<y;m++){if(""!==(f=e[l][c])&&null!==f&&new Date(f)>=n&&new Date(f)<=o){for(d[i]={},d[i][c]=f,r=0;r<s;r++)u=v[r],t[x].yNames.indexOf(u)!=r&&console.log("j is not equalt to indexOfYSeriesName"),p=t[x].factorArray[r],h=t[x].shiftArray[r],d[i][u]=e[l][u]*p+h;i++}l+=g}d.length=i,t[x].allRows=d}}(e,y,0,u,d),a&&n&&console.log("tables split, and reordered"),a&&n&&console.log("table Params",y),e=[],function(e){for(var t in e)e.hasOwnProperty(t)&&e[t].sort&&e[t].allRows.sort(V(t))}(y),a&&n&&console.log("SubTable sorted"),P(i,y,s,t,u,o,d,r,l)}function N(e,t){return-1!==(e=e.replace(/f/i,"")).search(/m/i)?re(e.substr(0,4)+"-"+e.substr(5,2)+"-01 00:00:00.000"+t):-1!==e.search(/q/i)?re(e.substr(0,4)+"-"+("1"===(a=e.substr(5,2))?"03":"2"===a?"06":"3"===a?"09":"12")+"-01 00:00:00.000"+t):e+="-12-31 00:00:00.000"+t;var a}function k(e,t,o){for(var r=e.length,s=0;s<r;s++)("."===e[s][o]||isNaN(e[s][o])||null===e[s][o])&&("."===e[s][o]&&a&&n&&console.log(". found"),isNaN(e[s][o])&&a&&n&&console.log("NaN found"),null===e[s][o]&&a&&n&&console.log("null found"),e.splice(s,1),r--,a&&n&&console.log("value = . found"))}function P(e,t,o,r,s,i,l,g,c){var u,d,m,y,f,p,h,x,v,b,D,w,A,T="",S="",E="",I=[],F=!1,q=[],N=[],P=0,O=0,M=0,C=0,B=1,R="",L=!1,Y=-1,j=0,H=0,W={},J=0,_=0,X="",G=[],V=z,Q=U,ee=K,te=Z;for(d=e.traces.length,a&&n&&console.log("dataSources: ",e),u=0;u<d;u++){if(a&&n&&console.log("starting trace: ",u),T=e.traces[u].xSeriesName,S=e.traces[u].ySeriesName,E=e.traces[u].traceID,a&&n&&console.log("xSeriesName: ",T,"   ySeriesName: ",S,"  traceID:",E),k(I=t[T].allRows,0,S),w=I.length,a&&n&&console.log("tableParams",t),a&&n&&console.log("allRows from table params",I),m=V(E,o),a&&n&&console.log("iData",m),F=!1,void 0!==r[m].x&&(F=!0),(q=[]).length=w,(N=[]).length=w,P=0,O=0===I.length?0:I.length-1,M=I.length,a&&n&&console.log("readTraceInitialIndex ",P),a&&n&&console.log("readTraceEndIndex ",O),a&&n&&console.log("xSeriesName: ",T),a&&n&&console.log("allRows: ",I),f=new Date(I[P][T]),y=new Date(I[O][T]),a&&n&&console.log("readTraceInitialDateAsDate: ",y),a&&n&&console.log("readTraceEndDateAsDate: ",f),R="none",B=1,b=t[T].yNames.indexOf(S),L=t[T].yCalculateAdjustedClose[b],a&&n&&console.log("calculateAdjustedClose",L),F){if(a&&n&&console.log("insert trace"),Y=0,C=M+P,a&&n&&console.log("readTraceLimit",C),p=new Date(r[m].x[r[m].x.length-1]),h=new Date(r[m].x[0]),x=r[m].y[r[m].x.length-1],v=r[m].y[0],a&&n&&console.log("existingInitialDateAsDate",p),a&&n&&console.log("existingEndDateAsDate",h),a&&n&&console.log("existingInitialValue",x),a&&n&&console.log("existingEndValue",v),y>h)j=P,D=M;else if(f<p)Y=r[m].x.length,j=P,D=M;else if(f>h)for(j=0,H=P;H<C;H++)new Date(I[H][T])<=h&&(D=H-P,L&&(R="existing",B=I[H][S]/v),H=C);else if(y<p)for(a&&n&&console.log("overlap, but new data is older than existing"),H=C-1;H>P-1;H--)new Date(I[H][T])>=p&&(D=C-(j=H+1),Y=r[m].x.length,L&&(R="new",B=x/I[H][S]),H=P-1);else a&&n&&console.log("total overlap"),j=(W=Q(I,T,P,M,r[m].x)).initialIndex,D=W.traceLength,Y=W.insertPoint,a&&n&&console.log("initialIndex: ",j),a&&n&&console.log("traceLength: ",D),a&&n&&console.log("insertPoint: ",Y),L&&(R="new",B=$(I,T,S,j,r[m],Y));if(L&&"none"!==R&&1!==B)if("new"===R)for(w=I.length,H=0;H<w;H++)I[H][S]*=B;else if("existing"===R)for(w=r[m].y.length,H=0;H<w;H++)r[m].y[H]*=B}else j=P,D=M,Y=0;for(A=0,_=D,a&&n&&console.log("fill processed dates"),J=0,H=j;J<_;H++,J++)X=I[H][T],""===i||new Date(X)>=s?(""===g||new Date(X)<=l)&&(q[J]=X,N[J]=I[H][S],A++):J=_;q.length>A&&(q.length=A,N.length=A),a&&n&&console.log("excess points removed"),a&&n&&console.log("remaining points:",A),void 0!==r[m].x&&void 0!==r[m].y||(r[m].x=[],r[m].y=[]),A>0&&(0===Y?r[m].x.length>0?(r[m].x=ee(q,r[m].x),r[m].y=ee(N,r[m].y)):(r[m].x=q,r[m].y=N):Y===r[m].x.length?(r[m].x=ee(r[m].x,q),r[m].y=ee(r[m].y,N)):(r[m].x=te(q,Y,r[m].x),r[m].y=te(N,Y,r[m].y))),-1===G.indexOf(T)&&G.push(T),a&&n&&console.log("data after trace loaded: ",r)}c(null)}function O(e,t,o,r,s,i){var l,g,d,m,y,f,p,h,x,v,b,D=[],w=[],A=[],T=[],S=[],E=[],I=24*s*60*60*1e3,F=!1;for(a&&c&&console.log("in createTraceWithFunction"),a&&c&&console.log("argumentsIndexes: ",t),a&&c&&console.log("millisecondsThreshold: ",I),f=t.length,a&&c&&console.log("numberOfArguments: ",f),D.length=f,w.length=f,A.length=f,T.length=i?f+1:f,a&&c&&console.log("limitOfArgument array: ",D),d=0;d<f;d++)void 0!==e[t[d]].x&&"[object Array]"===Object.prototype.toString.call(e[t[d]].x)&&void 0!==e[t[d]].y&&"[object Array]"===Object.prototype.toString.call(e[t[d]].y)||(F=!0);if(F)e[r].x=[],e[r].y=[];else{for(d=0;d<f;d++)D[d]=e[t[d]].x.length,w[d]=0,A[d]=!1;l=t[0],a&&c&&console.log("indexOfAnchorTrace: ",l),g=e[l].x.length,a&&c&&console.log("limit of anchor trace: ",g);for(var q=0;q<g;q++)if(w[0]=q,f>1){for(p=new Date(e[l].x[q]),d=1;d<f;d++)A[d]=!1;for(d=1;d<f;d++)if((h=Math.abs(p-new Date(e[t[d]].x[w[d]])))<=I&&(A[d]=!0),h>0)for(y=D[d],m=w[d];m<y;m++)x=Math.abs(p-new Date(e[t[d]].x[m])),a&&c&&console.log("arg:",d," k: ",m," newDistance: ",x),x<h&&(x<=I&&(A[d]=!0),h=x,w[d]=m),0===x&&(m=y),x>h&&(m=y);for(v=!0,d=1;d<f;d++)!1===A[d]&&(v=!1);if(v){if(i)for(T[0]=p,d=0;d<f;d++)T[d+1]=e[t[d]].y[w[d]];else for(d=0;d<f;d++)T[d]=e[t[d]].y[w[d]];b=o.apply(this,T),isNaN(b)?a&&u&&console.log("NaN in date: ",e[t[0]].x[w[0]]):(a&&u&&console.log("calculatedValue: ",b),S.push(e[t[0]].x[w[0]]),E.push(b))}}else T[0]=e[t[0]].y[w[0]],b=o.apply(this,T),isNaN(b)||(S.push(e[t[0]].x[w[0]]),E.push(b));e[r].x=S,e[r].y=E,a&&n&&console.log("data after createTraceWithFunction: ",e)}}function M(e,t,o,r,s,i){var l,g,d,m,y,f,p,h,x,v=[],b=[],D=[],w=[],A=24*s*60*60*1e3,T=!1,S=0,E="";for(a&&c&&console.log("in createTraceWithFunction on all dates"),a&&c&&console.log("argumentsIndexes: ",t),a&&c&&console.log("millisecondsThreshold: ",A),p=t.length,a&&c&&console.log("numberOfArguments: ",p),v.length=p,b.length=i?p+1:p,a&&c&&console.log("limitOfArgument array: ",v),m=0;m<p;m++)void 0!==e[t[m]].x&&"[object Array]"===Object.prototype.toString.call(e[t[m]].x)&&void 0!==e[t[m]].y&&"[object Array]"===Object.prototype.toString.call(e[t[m]].y)||(T=!0);if(T)e[r].x=[],e[r].y=[];else{var I={};for(m=0;m<p;m++)for(g=e[S=t[m]].x.length,l=0;l<g;l++)void 0===I[e[S].x[l]]&&(I[e[S].x[l]]=[],I[e[S].x[l]].length=p),I[e[S].x[l]][m]=l;var F=[];for(var q in I)I.hasOwnProperty(q)&&F.push([q]);for(g=F.length-1,d=F.length,l=0;l<g;l++)if(1===F[l].length)for(h=new Date(F[l][0]),m=l+l;m<d;m++)1===F[m].length&&Math.abs(h-new Date(F[m][0]))<=A&&(F[l].push(F[m][0]),F[m].splice(0,1));var N={};for(g=F.length,f=p,l=0;l<g;l++)if(F[l].length>0)for(d=F[l].length,void 0===N[E=F[l][0]]&&(N[E]=[],N[E].length=p),m=0;m<d;m++)for(y=0;y<f;y++)void 0===N[E][y]&&void 0!==I[F[l][m]][y]&&(N[E][y]=I[F[l][m]][y]);for(var q in N)if(N.hasOwnProperty(q)){if(i)for(b[0]=q,m=0;m<p;m++)void 0!==typeof N[q][m]&&(b[m+1]=e[t[m]].y[N[q][m]]);else for(m=0;m<p;m++)void 0!==typeof N[q][m]&&(b[m]=e[t[m]].y[N[q][m]]);x=o.apply(this,b),isNaN(x)?a&&u&&console.log("NaN in value on date: ",q):(a&&u&&console.log("calculatedValue: ",x),D.push(q),w.push(x))}e[r].x=D,e[r].y=w,a&&n&&console.log("data after createTraceWithFunction: ",e)}}function C(e,t,o){var r,s,i;return s=z(e.sourceTrace,t),"end of trace"!==e.factorInformation.date&&"beginning of trace"!==e.factorInformation.date||(r=z(e.factorInformation.referredDateTraceID,t)),"undefined"===(i=function(e,t,o){return"end of trace"===e?o[t].x[0]:"beggining of trace"===e?o[t].x[o[t].x.length-1]:"[object Date]"===Object.prototype.toString.call(new Date(e))?isNaN(new Date(e).getTime())?"undefined":(a&&n&&console.log("baseRealDate returned as valied"),e):"undefined"}(e.factorInformation.date,r,o))&&(i=o[s].x[0]),i}function B(e,t,a,n,o){return Xe(t,e,n,o)}function R(e,t,o,r,s,i){var l,g,c;c=Number(t[o]),a&&n&&console.log("in createRealTrace"),a&&n&&console.log("targetDateAsString: ",o),a&&n&&console.log("deflactorAtTargetDate: ",c),a&&n&&console.log("deflactorDictionary: ",t),g=e[s].y.length;var u=[],d=[];for(u.length=g,d.length=g,l=0;l<g;l++)u[l]=e[s].x[l],d[l]=e[s].y[l]*c/Number(t[e[s].x[l]]);e[i].x=u,e[i].y=d,a&&n&&console.log("data after createRealTrace: ",e)}function L(e,t,a,n){var o=n.getContext("2d");return o.font=a+"px "+t,o.measureText(e).width}function Y(e,t){if(0===t)return e;var a=e%t;return 0===a?e:e+t-a}function j(e){return e<10?"0"+e:""+e}function H(e){return{string:e,year:Number(e.substr(0,4)),month:Number(e.substr(5,2)),day:Number(e.substr(8,2))}}function W(e,t,a){var n=new Date(e,t-1,a);do{n.setDate(n.getDate()+1)}while("undefined"!=_(n.getFullYear(),n.getMonth()+1,n.getDate()));return n.getFullYear()+"-"+(n.getMonth()+1<10?"0":"")+(n.getMonth()+1)+"-"+(n.getDate()<10?"0":"")+n.getDate()}function J(e,t,a){var n=new Date(e,t-1,a);do{n.setDate(n.getDate()-1)}while("undefined"!=_(n.getFullYear(),n.getMonth()+1,n.getDate()));return n.getFullYear()+"-"+(n.getMonth()+1<10?"0":"")+(n.getMonth()+1)+"-"+(n.getDate()<10?"0":"")+n.getDate()}function _(e,t,a){var n={W:{"1/3/1":"Martin Luther King Jr. Day","2/3/1":"Washington's Birthday","5/5/1":"Memorial Day","9/1/1":"Labor Day","11/4/4":"Thanksgiving Day"},Weekends:{6:"Saturday",0:"Sunday"}},o=new Date(e,0,1).getDay(),r=new Date(e,6,4).getDay(),s=new Date(e,11,25).getDay();n.M={},0===o?n.M["1/2"]="New Year's Day":o<6&&(n.M["1/1"]="New Year's Day"),0===r?n.M["7/5"]="Independence Day":6==r?n.M["7/3"]="Independence Day":n.M["7/4"]="Independence Day",0===s?n.M["12/26"]="Christmas Day":6==s?n.M["12/24"]="Christmas Day":n.M["12/25"]="Christmas Day";var i=new Date(e,t-1,a).getDay(),l=t+"/"+a,g=t+"/"+((1===i&&a+7>31?"5":null)||1+(0|(a-1)/7))+"/"+i,c=e+"-"+(t<10?"0":"")+t+"-"+(a<10?"0":"")+a;return n.Weekends[""+i]||n.M[l]||n.W[g]||(c==function(e){var t=new Date("1899-12-31T00:00:00Z"),a=(new Date(e.toString()+"-04-02T00:00:00Z")-t)/864e5,n=7*Math.round(a/7+.14*X(19*X(e,19)-7,30))-8,o=new Date(864e5*(n-1)+t.getTime()),r=o.getUTCMonth()+1,s=o.getUTCDate();return o.getFullYear()+"-"+(r<10?"0":"")+r+"-"+(s<10?"0":"")+s}(e)?"Good Friday":"undefined")}function X(e,t){return e-t*Math.floor(e/t)}function G(e,t,a,n){var o={},r=new Date(e,t-1,a).getDay();function s(e){return e<10?"0"+e:""+e}var i=""+e,l=i+"-"+s(t)+"-",g=new Date(e,t-1,-6+a+(7+n-r)%7),c=new Date(e,t-1,a+1),u=new Date(e,t-1,1+a+(7+n-r)%7),d=new Date(e,t-1,a+(7+n-r)%7),m=new Date(e,3*(Math.trunc((t-1)/3)+1),1),y=new Date(e,3*(Math.trunc((t-1)/3)+1),0),f=new Date(e,6*(Math.trunc((t-1)/6)+1),1),p=new Date(e,6*(Math.trunc((t-1)/6)+1),0),h=new Date(e,t,1),x=new Date(e,t,0);return o.begins={day:l+s(a),week:g.getFullYear()+"-"+s(g.getMonth()+1)+"-"+s(g.getDate()),month:l+"01",quarter:i+"-"+s(3*Math.trunc((t-1)/3)+1)+"-01",semester:i+"-"+s(6*Math.trunc((t-1)/6)+1)+"-01",year:i+"-01-01"},o.ends={day:c.getFullYear()+"-"+s(c.getMonth()+1)+"-"+s(c.getDate()),week:u.getFullYear()+"-"+s(u.getMonth()+1)+"-"+s(u.getDate()),month:h.getFullYear()+"-"+s(h.getMonth()+1)+"-"+s(h.getDate()),quarter:m.getFullYear()+"-"+s(m.getMonth()+1)+"-"+s(m.getDate()),semester:f.getFullYear()+"-"+s(f.getMonth()+1)+"-"+s(f.getDate()),year:e+1+"-01-01"},o.label={day:e+"-"+s(t)+"-"+s(a),week:d.getFullYear()+"-"+s(d.getMonth()+1)+"-"+s(d.getDate()),month:x.getFullYear()+"-"+s(x.getMonth()+1)+"-"+s(x.getDate()),quarter:y.getFullYear()+"-"+s(y.getMonth()+1)+"-"+s(y.getDate()),semester:p.getFullYear()+"-"+s(p.getMonth()+1)+"-"+s(p.getDate()),year:e+"-12-31"},o}function U(e,t,a,n,o){var r,s=0,i=o.length,l=new Date,g=new Date,c={initialIndex:-1,traceLength:-1,insertPoint:0};r=a+n;for(var u=a;u<r;u++)if(l=new Date(e[u][t]),-1===c.initialIndex)for(s=-1;s<i;s++)if(-1===s){if(l>(g=new Date(o[s+1])))for(c.initialIndex=u,c.insertPoint=s+1,s=i,u=c.initialIndex;u<r;u++)(l=new Date(e[u][t]))<=g&&(c.traceLength=u-c.initialIndex,u=r)}else if(s===i-1)l<new Date(o[s])&&(c.initialIndex=u,c.insertPoint=s+1,s=i,c.traceLength=r-c.initialIndex,u=r);else if(g=new Date(o[s+1]),l<new Date(o[s])&&l>g)for(c.initialIndex=u,c.insertPoint=s+1,s=i,u=c.initialIndex;u<r;u++)(l=new Date(e[u][t]))<=g&&(c.traceLength=u-c.initialIndex,u=r);return-1===c.initialIndex&&(c.initialIndex=0,c.insertPoint=0,c.traceLength=0),c}function z(e,t){for(var a=t.length,n=0;n<a;n++)if(t[n].traceID===e)return n;return-1}function V(e){return function(t,a){return new Date(a[e])-new Date(t[e])}}function K(e,t){var a=t.length,n=e.length;e.length=a+n;for(var o=0;o<a;o++)e[n]=t[o],n++;return e}function Z(e,t,a){var n=e.length,o=a.length;a.length=o+n;for(var r=t+n,s=t;s<o;s++)a[r]=a[s],r++;for(s=t,r=0;r<n;r++)a[s]=e[r],s++;return a}function Q(e,t){for(var a,n,o=t.traces,r=o.length,s=0;s<r;s++)a="x"+s,n="y"+s,o[s].xSeriesName=a,o[s].ySeriesName=n,e.hasOwnProperty(a)||(e[a]={},e[a].yNames=[],e[a].yCalculateAdjustedClose=[],e[a].factorArray=[],e[a].shiftArray=[]),-1===e[a].yNames.indexOf(n)&&(e[a].yNames.push(n),void 0!==t.calculateAdjustedClose?e[a].yCalculateAdjustedClose.push(t.calculateAdjustedClose):void 0!==o[s].calculateAdjustedClose?e[a].yCalculateAdjustedClose.push(o[s].calculateAdjustedClose):e[a].yCalculateAdjustedClose.push(!1),void 0!==o[s].factor?e[a].factorArray.push(o[s].factor):e[a].factorArray.push(1),void 0!==o[s].shift?e[a].shiftArray.push(o[s].shift):e[a].shiftArray.push(0)),void 0!==o[s].sort?e[a].sort=o[s].sort:void 0===e[a].sort&&(e[a].sort=!1),e[a].xDateSuffix="",void 0!==o[s].firstItemToRead?e[a].firstItemToRead=o[s].firstItemToRead:void 0===e[a].firstItemToRead&&(e[a].firstItemToRead="first"),e[a].processDates=!1,void 0!==o[s].factor&&(e[a].factor=o[s].factor),void 0!==o[s].shift&&(e[a].shift=o[s].shift)}function $(e,t,a,n,o,r){var s,i,l=new Date,g=(new Date,1);for(n>0?(l=new Date(e[n-1][t]),g=e[n-1][a]):(l=new Date(e[n][t]),g=e[n][a]),i=o.x.length,s=r>0?r-1:r;i;s++)if(new Date(o.x[s])>=l)return o.y[s]/g;return 1}function ee(e){function t(e){return e<10?"0"+e:""+e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())}function te(e){var t,a,n=(new Date).getTimezoneOffset();function o(e){return e<10?"0"+e:""+e}return t=n>0?"-"+ge(n):"+"+ge(-n),e.getFullYear()+"-"+o(e.getMonth()+1)+"-"+o(e.getDate())+" "+o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())+(0!==e.getMilliseconds()?"."+((a=e.getMilliseconds())<100?"0"+o(a):a):"")+t}function ae(e){e+=" 00:00:00"+se(),a&&n&&console.log(e.substr(0,4));var t=new Date(Number(e.substr(0,4)),Number(e.substr(5,2))-1,Number(e.substr(8,2)));return a&&n&&console.log(t),t=new Date(t.getTime()-864e5),a&&n&&console.log(t),a&&n&&console.log(t),a&&n&&console.log(t.getFullYear()),ne(t)}function ne(e){function t(e){return e<10?"0"+e:""+e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())}function oe(e){var t,a=0,n="",o=(e=e.trim()).split("-"),r="";return(a=Number(o[2]))<100&&(a+=a<50?2e3:1900),r=a.toString(),"Jan"===(t=o[1])?n="01":"Feb"===t?n="02":"Mar"===t?n="03":"Apr"===t?n="04":"May"===t?n="05":"Jun"===t?n="06":"Jul"===t?n="07":"Aug"===t?n="08":"Sep"===t?n="09":"Oct"===t?n="10":"Nov"===t?n="11":"Dec"===t&&(n="12"),r+="-"+n+"-",r+=Number(o[0])<10?"0"+o[0]:o[0]}function re(e){var t=new Date(e),a=new Date(t.getFullYear(),t.getMonth()+1,0).getDate().toString();return e=e.substring(0,8)+a+e.substring(10,e.length)}function se(){var e=(new Date).getTimezoneOffset();return e>0?"-"+ge(e):"+"+ge(-e)}function ie(e){var t=(new Date).getTimezoneOffset();return le(e,t>0?"-"+ge(t):"+"+ge(-t))}function le(e,t){var a="",n=[],o="";return e.includes("Z")?(a="+00:00",o=(n=e.split("Z"))[0]):e.includes("+")||e.includes("-")?(e.includes("+")&&(a="+"+(n=e.split("+"))[1],o=n[0]),e.includes("-")&&(3===(n=e.split("-")).length?(a=t,o=n[0]+"-"+n[1]+"-"+n[2]):2==n.length?(a=t,o=n[0]+"-"+n[1]):(a="-"+n[3],o=n[0]+"-"+n[1]+"-"+n[2]))):(a=t,o=e+"-12-31"),o.includes(" ")||o.includes("T")?(e.includes(" ")&&(n=o.split(" ")),e.includes("T")&&(n=o.split("T")),n[0]+" "+n[1]+a):o+" 00:00:00"+a}function ge(e){var t=0,a="",n="";return a=((e-(t=e%60))/60).toString(),n=t.toString(),(a=1===a.length?"0"+a:a)+":"+(n=1===n.length?"0"+n:n)}function ce(e,t,a){var n=e.length,o=[];o.length=n;for(var r=0;r<n;r++)o[r]={type:"rect",xref:"x",yref:"paper",x0:e[r].x0,x1:e[r].x1,y0:0,y1:1,fillcolor:t,opacity:a,line:{width:0}};return o}function ue(e){e.style.visibility="visible"}function de(e){e.style.visibility="hidden"}function me(e,t,a){for(var n,o,r,s,i=e.length,l=0,g=0,c=0,u=0;u<i;u++){for(n=[],o=[],r=e[u][t].x,s=e[u][t][a],l=r.length,n.length=l,o.length=l,g=0,c=0;g<l;g++)isNaN(s[g])||(n[g]=r[g],o[g]=s[g],c++);n.length=c,o.length=c,e[u].x=n,e[u].y=o}}function ye(e,t){for(var a,n,o,r,s=e.length,i=0,l=0,g=0;g<s;g++){for(a=[],n=[],o=e[g][t].x,r=e[g][t].y,l=o.length,a.length=l,n.length=l,i=0;i<l;i++)a[i]=o[i],n[i]=r[i];e[g].x=a,e[g].y=n}}function fe(e,t,a){for(var n,o,r,s,i=e.length,l=0,g=0,c=0;c<i;c++)if(void 0!==e[c].x&&void 0!==e[c].y&&void 0===e[c][t]&&void 0===e[c][a]){for(n=[],o=[],r=e[c].x,s=e[c].y,l=r.length,n.length=l,o.length=l,g=0;g<l;g++)n[g]=r[g],o[g]=s[g];e[c][t]=n,e[c][a]=o}}function pe(e,t){for(var a,n,o,r,s=e.length,i=0,l=0,g=0;g<s;g++){for(a=[],n=[],o=e[g].x,r=e[g].y,i=o.length,a.length=i,n.length=i,l=0;l<i;l++)a[l]=o[l],n[l]=r[l];e[g][t]={},e[g][t].x=a,e[g][t].y=n}}function he(e,t,a){for(var n,o,r,s,i=e.length,l=0,g=0,c=0;c<i;c++){for(n=[],o=[],r=e[c][t],s=e[c][a],g=r.length,n.length=g,o.length=g,l=0;l<g;l++)n[l]=r[l],o[l]=s[l];e[c].x=n,e[c].y=o}}function xe(e,t){var a;if("[object Array]"===Object.prototype.toString.call(e))return void 0===t&&(t=e),t;if("object"==typeof e){for(a in void 0===t&&(t={}),e)e.hasOwnProperty(a)&&(t[a]=xe(e[a],t[a]));return t}return t||e}function ve(e,t,a){for(var n,o,r=new Date(e),s=new Date(t),i=0;i<a.length;i++)if(void 0===a[i].visible||!0===a[i].visible)for(var l=a[i],g=0;g<l.x.length;g++){var c=new Date(l.x[g]);if(c>=r&&c<=s){var u=Number(l.y[g]);(void 0===o||u>o)&&(o=u),(void 0===n||u<n)&&(n=u)}}return[n,o]}function be(e){for(var t,a,n,o=new Date,r=e.length,s=0,i={},l=0;l<r;l++)s=(n=e[l].x).length,o=new Date(n[0]),(void 0===a||o>a)&&(a=o,i.max=n[0]),o=new Date(n[s-1]),(void 0===t||o<t)&&(t=o,i.min=n[s-1]);return i}function De(e,t){for(var a=e.length,n=0;n<a;n++)if(void 0!==e[n].name&&e[n].name===t)return n;return!1}function we(e,t,a){return(e-t.margin.l-t.externalMargin.r+t.customMarginOfObjects-a)/(e-t.margin.l-t.margin.r)}function Ae(e,t,a){for(var n=0;n<t.length;n++)if(void 0!==t[n].name&&t[n].name===a)return t[n].x=e,!0;return!1}function Te(e,t){return(e-t.margin.l-t.externalMargin.r+t.customMarginOfObjects)/(e-t.margin.l-t.margin.r)}function Se(e,t){t.textContent=x(e?"compared":"uncompared")}function Ee(e,t){t.textContent=x(e?"log":"linear")}function Ie(e,t){for(var a=t.length,n=0;n<a;n++)if(t[n].args[1]===e)return n;return!1}function Fe(e,t){for(var a=e.length,n=0;n<a;n++)t.push(e[n])}function qe(e,t){for(var a=t.length,n=0;n<a;n++)if(void 0!==t[n].args&&void 0!==t[n].args[1]&&t[n].args[1]===e&&void 0!==t[n].label)return t[n].label;return""}function Ne(e,t,a,n,o){a===n?ke(e,t,a,n,"left",o):e>=a&&t<=n?(o[0]=e,o[1]=t):e<a&&t>n?(o[0]=a,o[1]=n):e<a?ke(e,t,a,n,"right",o):t>n?ke(e,t,a,n,"left",o):(o[0]=a,o[1]=n)}function ke(e,t,a,n,o,r){var s,i;"right"===o?(s=new Date(a).getTime()-new Date(e).getTime(),i=te(new Date(new Date(t).getTime()+s)),r[1]=i>n&&a!==n?n:i,r[0]=a):(s=new Date(t).getTime()-new Date(n).getTime(),i=te(new Date(new Date(e).getTime()-s)),r[0]=i<a&&a!==n?a:i,r[1]=n)}function Pe(e,t,a,n,o){var r=ve(e.xaxis.range[0],e.xaxis.range[1],t);!function(e,t,a,n,o,r){var s;s=Be(t[0],t[1],e,0,0,r),t[1]=s[1],t[0]=s[0],"log"===e&&(t[0]=Math.log(t[0]<=0?1e-7:t[0])/Math.log(10),t[1]=Math.log(t[1]<=0?1e-7:t[1])/Math.log(10)),isNaN(t[0])||isNaN(t[1])||(a.yaxis.range=[t[0],t[1]],a.yaxis.autorange=!1)}(e.yaxis.type,r,e,0,0,o)}function Oe(e,t,a,n,o,r){var s,i=[];return a=(s=Be(t,a,e,0,0,r))[1],t=s[0],"log"===e?(i.push(Math.log(t<=0?1e-7:t)/Math.log(10)),i.push(Math.log(a)/Math.log(10))):(i.push(t),i.push(a)),i}function Me(e,t,a){new Date;var n,o,r,s,i=new Date(t),l=0;r=e.length;for(var g=0;g<r;g++){for(n=0,s=e[g].x.length,o=0;o<s;o++)new Date(e[g].x[o])>=i?n=o:o=s;for(l="change"===a?e[g].yOriginal[n]:e[g].y[n],s=e[g].y.length,o=0;o<s;o++)e[g].y[o]=e[g].y[o]/l}}function Ce(e,t,a,n,o,r){return!1===e&&(pe(t,"uncompared"),e=!0),Me(t,a,r),e}function Be(e,t,a,n,o,r){var s=[],i=0,l=0,g=0,c=0,u=0,d=0;return"linear"===a&&(u=(u=Number(t)-Number(e))*(1-Number(r))/Number(r)/2,l=e>0&&u>e?0:e-u,i=t+u,s.push(l),s.push(i)),"log"===a&&(d=(d=Math.log10(Number(t))-Math.log10(Number(e)))*(1-Number(r))/Number(r)/2,g=Math.log10(Number(e))-d,c=Math.log10(Number(t))+d,g=Math.pow(10,g),c=Math.pow(10,c),s.push(g),s.push(c)),s}function Re(e,t,a,n,o){var r=e;function s(e,t,a,n){var o=n.getContext("2d");return o.font=a+"px "+t,o.measureText(e).width}for(var i=0;;i++){if(s(r+" ",a,n,o)>t)return r;r+=" "}}function Le(e,t){for(var a in t)t.hasOwnProperty(a)&&(e.style[a]=t[a])}function Ye(e,t,a,n){var o;return o=document.createElement(e),void 0!==a&&o.appendChild(document.createTextNode(a)),void 0!==t&&(o.id=t),void 0!==n&&Le(o,n),o}function je(e,t,a,n){e.yaxis.type!==t.yaxis.type&&(e.yaxis.type=t.yaxis.type,Ee("log"===e.yaxis.type,a.logLinearButtonElement))}function He(e){var t=e.replace("px","");return Number(t)}function We(e,t,a){e.style.backgroundcolor=t,e.style.color=a}function Je(e,t,a,n,o){e.addEventListener("mouseover",function(){We(e,t,a)}),e.addEventListener("mouseout",function(){We(e,n,o)})}function _e(e){for(var t=e.length,a=-1,n=0;n<t;n++)void 0!==e[n].deflactor&&e[n].deflactor&&(a=n,n=t);return a}function Xe(e,t,a,n){var o=0,r=0,s=0,i=e.length,l="",g="";if(-1===n)return!1;s=0;for(var c=0;c<i;c++){if(void 0!==e[c].xOriginal)for(r=e[c].xOriginal.length,o=0;o<r;o++)void 0===t[l=e[c].xOriginal[o]]&&(s=Ge(l,t,e[n],s));for(g in a)if(a.hasOwnProperty(g)&&!0===a[g]&&void 0!==e[c][g])for(r=e[c][g].x.length,o=0;o<r;o++)void 0===t[l=e[c][g].x[o]]&&(s=Ge(l,t,e[n],s))}return!0}function Ge(e,t,a,n){var o=new Date(e),r=new Date,s=new Date,i=a.x.length,l=1,g=0,c=0,u=0;if(n>i&&(n=0),o<=(r=new Date(a.xOriginal[i-1])))s=new Date(a.xOriginal[i-2]),c=a.yOriginal[i-1],u=a.yOriginal[i-2],t[e]=Ue(o,r,s,c,u);else if(o>=(s=new Date(a.xOriginal[0])))r=new Date(a.xOriginal[1]),c=a.yOriginal[1],u=a.yOriginal[0],t[e]=Ue(o,r,s,c,u);else for(l=o>=new Date(a.x[n])?-1:1,g=n;g<i&&g>-1;)o>=new Date(a.xOriginal[n+1])&&o<=new Date(a.xOriginal[n])?(r=new Date(a.xOriginal[n+1]),s=new Date(a.xOriginal[n]),c=a.yOriginal[n+1],u=a.yOriginal[n],t[e]=Ue(o,r,s,c,u),g=i):n=g+=l;return n}function Ue(e,t,a,n,o){return Number(n)*Math.pow(o/n,(e.getTime()-t.getTime())/(a.getTime()-t.getTime()))}function ze(e,t,o,r,s){return a&&n&&console.log("in set base real/nominal date"),a&&n&&console.log("baseRealDate:",e),a&&n&&console.log("rangeX0:",t,"rangeX1",o),a&&n&&console.log("domainX0:",r,"domainX1",s),"end of range"===e?o:"beggining of range"===e?t:"end of domain"===e?s:"beggining of domain"===e?r:"[object Date]"===Object.prototype.toString.call(new Date(e))?isNaN(new Date(e).getTime())?s:(a&&n&&console.log("baseRealDate returned as valied"),e):s}function Ve(e,t,o,r){var s,i,l;a&&n&&console.log("baseRealNominalDate: ",o);var g=Number(t[o]);a&&n&&console.log("in transformDataToReal"),a&&n&&console.log("base: ",g),a&&n&&console.log("deflactorDictionary: ",t),i=e.length;for(var c=0;c<i;c++)if(r[c].toggleRealNominal)for(l=e[c].y.length,s=0;s<l;s++)e[c].y[s]=g*e[c].y[s]/Number(t[e[c].x[s]]);a&&n&&console.log("data after transform to real: ",e)}function Ke(){function t(e){if(void 0!==e)if(e!==location){if(void 0!==e.location&&void 0!==e.location.protocol)return e.location.protocol}else if(void 0!==e&&void 0!==e.protocol)return e.protocol;return!1}for(var a,n=[document,e,location],o=0;o<n.length;o++)if(a=t(n[o]))return"https:"===a;return!1}return t.newTimeseriesPlot=function(e,t,r,s,i={},l={},c={},u={}){if(a&&o&&console.time("TIME: newTimeseriesPlot"),a&&o&&console.time("TIME: initialSettingsBeforeReadData"),void 0!==i&&void 0!==i.locale&&(h=p(i.locale,f)),a&&console.log("translations: ",h),arguments.length<3)return"incomplete arguments";var d={visibility:"visible",position:"absolute",top:"-1px",right:"-1px",bottom:"-1px",left:"-1px",background:"url('https://raw.githubusercontent.com/ajoposor/Images/master/files/loader_big_blue.gif')50% 50% no-repeat #FFFFFF",opacity:1,"z-index":"9999"};e.loaderID="loader_"+e.wholeDivID,e.wholeDivElement=document.getElementById(e.wholeDivID),Le(e.wholeDivElement,{visibility:"hidden",opacity:1,position:"relative"}),e.loaderElement=document.createElement("div"),e.loaderElement.id=e.loaderID,e.wholeDivElement.appendChild(e.loaderElement),void 0===e.noLoadedDataMessage&&(e.noLoadedDataMessage='<div style="position:relative; top:50%; transform:translateY(-50%);text-align:center;"><h3><font color="#1A5488"  ><b>Datos no recibidos</b></font></div>'),void 0===e.onErrorHideWholeDiv&&(e.onErrorHideWholeDiv=!1),Le(e.loaderElement,d);var m=[],y=[{method:"relayout",args:["myAggregation","base"],label:" "}],v=[{method:"relayout",args:["myAggregation","close"],label:x("close")},{method:"relayout",args:["myAggregation","average"],label:x("avg.")},{method:"relayout",args:["myAggregation","change"],label:x("chg.")},{method:"relayout",args:["myAggregation","percChange"],label:x("% chg.")},{method:"relayout",args:["myAggregation","sqrPercChange"],label:x("% chg.^2")},{method:"relayout",args:["myAggregation","cumulative"],label:x("cum.")}],b={color:"#444444",background:"#EEEEEE",display:"block",position:"relative",float:"left",width:"50px",padding:"0",margin:"1px 1px 1px 1px",transition:"all 0.2s","background-color":"#EEEEEE","font-weight":"100","text-align":"center","line-height":"17px","border-radius":"3px","border-style":"none"},D={"background-color":"#D4D4D4",color:"#444444"},w={color:"#444444",background:"#EEEEEE",display:"block",position:"relative",float:"left",width:"50px",padding:"0",margin:"1px 1px 1px 1px",transition:"all 0.2s","background-color":"#D4D4D4","font-weight":"100","text-align":"center","line-height":"17px","border-radius":"3px","border-style":"none"},T={"background-color":"#EEEEEE","touch-background-color":"#D4D4D4","mouse-background-color":"#EEEEEE",color:"#444444"},S="://kapitalvalue.com/plots_data/testing/fredRecessions-unlocked.php?observation_start=2015-12-01";Ke()?(a&&n&&g&&console.log("HTTPS:"),S="https"+S):(a&&n&&g&&console.log("HTTP:"),S="http"+S);var E,I={daily:!0,weekly:!0,monthly:!0,quarterly:!0,semiannual:!0,annual:!0};xe({displayRecessions:!0,recessionsFillColor:"#000000",recessionsOpacity:.15,newRecessionsUrl:S,queueConcurrencyLimit:10,queueConcurrencyDelay:5,waitForGlobalData:!1,dataReadFlag:[!0],maxWaitForGlobalData:24e4,flagTestInterval:100,allowCompare:!1,transformToBaseIndex:!1,allowFrequencyResampling:!1,targetFrequencyDisplay:"daily",defaultNames:{frequency:"base",aggregation:"base"},defaultLabels:{frequency:!1,aggregation:!1},defaultButtonLabels:{frequency:x("base"),aggregation:x("base")},allowSelectorOptions:!0,allowLogLinear:!1,allowDownload:!1,allowRealNominal:!1,downloadedFileName:"CSV Data File",xAxisNameOnCSV:"Date",widthOfRightItemsFrequencyButtons:94,singleButtonStringLengthInPixels:59,textAndSpaceToTextRatio:1.8,maxNumberOfCharactersInFrequencyButton:11,maxNumberOfCharactersInAggregationButton:6,endOfWeek:5,numberOfIntervalsInYAxis:9,possibleYTickMultiples:[.1,.2,.5,1,2,5,10],rangeProportion:.9,periodKeys:{day:!0,week:!0,month:!0,quarter:!0,semester:!0,year:!0},period:{daily:"day",weekly:"week",monthly:"month",quarterly:"quarter",semiannual:"semester",annual:"year"},desiredFrequencies:["daily","weekly","monthly","quarterly","semiannual","annual"],buttonsDefaultStyle:b,buttonsHoverDefaultStyle:D,buttonsStyle:b,buttonsHoverStyle:D,pressedButtonDefaultStyle:w,pressedButtonHoverDefaultStyle:T,removeDoubleClickToZoomBackOut:!0},i),a&&n&&console.log("settings after settings default: ",i),xe({xaxis:{rangeslider:{thickness:.06},tickangle:0,tickfont:{family:"Open Sans, Arial",size:12,color:"#0d0d0d"}},yaxis:{type:"linear",autorange:!0,side:"right",tickfont:{family:"Open Sans, Arial",size:12,color:"#0d0d0d"},hoverformat:".4r"},showlegend:!1,paper_bgcolor:"#E1E9F0",margin:{t:50,l:15,r:35,b:40},externalMargin:{t:15,l:15,r:15,b:15},customMarginOfObjects:5},c),e.plotDivElement=document.getElementById(e.plotDivID),e.plotlyDivID=e.plotDivID+"_plotly",e.plotlyDivElement=Ye("div",e.plotlyDivID),e.plotDivElement.appendChild(e.plotlyDivElement),e.plotlyDivElement.style["background-color"]=c.paper_bgcolor,(i.allowCompare||i.allowLogLinear||i.allowDownload||i.allowRealNominal)&&(e.footerDivID=e.plotDivID+"_plotlyFooter",e.footerDivElement=Ye("div",e.footerDivID),e.plotDivElement.appendChild(e.footerDivElement),e.footerDivElement.style["background-color"]=c.paper_bgcolor),i.removeDoubleClickToZoomBackOut&&((E=document.createElement("style")).type="text/css",E.innerHTML="div.plotly-notifier { visibility: hidden; }",document.getElementsByTagName("head")[0].appendChild(E)),i.allowLogLinear&&(e.logLinearButtonID=e.footerDivID+"_logLinear",i.buttonsStyle.float="right",i.buttonsStyle.width="50px",i.buttonsStyle["border-style"]="inset",i.buttonsStyle["background-color"]=i.buttonsHoverDefaultStyle["background-color"],e.logLinearButtonElement=Ye("button",e.logLinearButtonID,"log"===c.yaxis.type?x("log"):x("linear"),i.buttonsStyle),e.logLinearButtonElement.style.marginRight=c.externalMargin.r+"px",e.footerDivElement.appendChild(e.logLinearButtonElement),Je(e.logLinearButtonElement,i.pressedButtonHoverDefaultStyle["background-color"],i.pressedButtonHoverDefaultStyle.color,i.pressedButtonDefaultStyle["background-color"],i.pressedButtonDefaultStyle.color)),i.allowDownload&&(e.downloadButtonID=e.footerDivID+"_download",i.buttonsStyle.float="left",i.buttonsStyle.width="30px",i.buttonsStyle["border-style"]=i.buttonsDefaultStyle["border-style"],i.buttonsStyle["background-color"]=i.buttonsDefaultStyle["background-color"],e.downloadButtonElement=Ye("button",e.downloadButtonID,"",i.buttonsStyle),e.downloadButtonElement.innerHTML='<img src="https://raw.githubusercontent.com/ajoposor/Images/master/files/Download_Arrow_10_Dark.png" />',e.downloadButtonElement.style.marginLeft=c.externalMargin.l+"px",e.footerDivElement.appendChild(e.downloadButtonElement),Je(e.downloadButtonElement,i.buttonsHoverDefaultStyle["background-color"],i.buttonsHoverDefaultStyle.color,i.buttonsDefaultStyle["background-color"],i.buttonsDefaultStyle.color),e.downloadButtonElement.addEventListener("click",function(){Plotly.relayout(e.plotlyDivElement,{download:!0})},!1)),i.allowRealNominal&&(e.realNominalButtonID=e.footerDivID+"_realNominal",i.buttonsStyle.float="left",i.buttonsStyle.width="55px",i.buttonsStyle["border-style"]="inset",i.buttonsStyle["background-color"]=i.buttonsHoverDefaultStyle["background-color"],e.realNominalButtonElement=Ye("button",e.realNominalButtonID,"real"===i.initialRealNominal?x("real"):x("nominal"),i.buttonsStyle),i.allowDownload||(e.realNominalButtonElement.style.marginLeft=c.externalMargin.l+"px"),e.footerDivElement.appendChild(e.realNominalButtonElement),Je(e.realNominalButtonElement,i.pressedButtonHoverDefaultStyle["background-color"],i.pressedButtonHoverDefaultStyle.color,i.pressedButtonDefaultStyle["background-color"],i.pressedButtonDefaultStyle.color)),i.allowCompare&&(e.compareButtonID=e.footerDivID+"_compare",i.buttonsStyle.float="left",i.buttonsStyle.width="85px",i.buttonsStyle["border-style"]="inset",i.buttonsStyle["background-color"]=i.buttonsHoverDefaultStyle["background-color"],"percChange"!==i.series.baseAggregation&&"sqrPercChange"!==i.series.baseAggregation||(i.transformToBaseIndex=!1),e.compareButtonElement=Ye("button",e.compareButtonID,i.transformToBaseIndex?x("compared"):x("uncompared"),i.buttonsStyle),i.allowDownload||i.allowRealNominal||(e.compareButtonElement.style.marginLeft=c.externalMargin.l+"px"),e.footerDivElement.appendChild(e.compareButtonElement),Je(e.compareButtonElement,i.pressedButtonHoverDefaultStyle["background-color"],i.pressedButtonHoverDefaultStyle.color,i.pressedButtonDefaultStyle["background-color"],i.pressedButtonDefaultStyle.color));var F,q=!1,N="";document.addEventListener("touchstart",function(e){clearTimeout(F),q=!0,"can-touch"!==N&&(N="can-touch",document.documentElement.classList.add(N),i.pressedButtonHoverDefaultStyle["background-color"]=i.pressedButtonHoverDefaultStyle["touch-background-color"]),F=setTimeout(function(){q=!1},500)},!1),document.addEventListener("mouseover",function(e){q||"can-touch"!==N||(q=!1,N="",document.documentElement.classList.remove("can-touch"),i.pressedButtonHoverDefaultStyle["background-color"]=i.pressedButtonHoverDefaultStyle["mouse-background-color"])},!1),function(e,t,a){var n=0,o="";for(o in e)e.hasOwnProperty(o)&&(e[o]=!1);n=t.length;for(var r=0;r<n;r++)o=t[r],void 0!==a[o]&&(e[a[o]]=!0)}(i.periodKeys,i.desiredFrequencies,i.period),void 0===i.series.baseFrequency&&(i.series.baseFrequency=i.defaultNames.frequency,i.series.customFrequency=!0,i.series.baseFrequencyType="not available"),function(e,t){var a=!1;for(var n in t)t.hasOwnProperty(n)&&n===e&&(a=!0);return a}(i.series.baseFrequency,I)?(!1===function(e,t){for(var a=t.length,n=0;n<a;n++)if(t[n]===e)return!0;return!1}(i.series.baseFrequency,I)&&(i.desiredFrequencies=function(e,t,a){for(var n=[],o=a.length,r=t.length,s=0,i="",l=0;l<o;l++)if((i=a[l])===e)n.push(i);else for(s=0;s<r;s++)t[s]===i&&n.push(i);return n}(i.series.baseFrequency,i.desiredFrequencies,["daily","weekly","monthly","quarterly","semiannual","annual"])),i.series.customFrequency=!1,i.series.baseFrequencyType="normal"):(i.series.baseFrequency.length>i.maxNumberOfCharactersInFrequencyButton&&(i.series.baseFrequency=i.series.baseFrequency.substring(0,i.maxNumberOfCharactersInFrequencyButton-1)+"."),I[i.series.baseFrequency]=!0,function(e,t,a){var n=t.length,o=!1;a=void 0===a?"push":a;for(var r=0;r<n;r++)t[r]===e&&(o=!0);o||t[a](e)}(i.series.baseFrequency,i.desiredFrequencies,"unshift"),i.series.customFrequency=!0,i.series.baseFrequencyType="custom");var k=[{name:"frequencies",visible:!0,type:"dropdown",active:0,y:1.14,yanchor:"top",x:.75,xanchor:"right",pad:{t:1,r:1,b:1,l:1},direction:"down",font:{family:"Open Sans, Arial",size:12,color:"#0d0d0d"},bgcolor:"#EEEEEE",buttons:function(e,t){for(var a=[],n=0;n<e.length;n++)void 0!==t[e[n]]&&(a[n]={label:x(e[n]),method:"relayout",args:["myFrequency",e[n]]});return a}(i.desiredFrequencies,I)},{name:"aggregation",visible:!0,type:"dropdown",active:0,y:1.14,yanchor:"top",x:1,xanchor:"right",pad:{t:1,r:1,b:1,l:1},direction:"down",font:{family:"Open Sans, Arial",size:12,color:"#0d0d0d"},bgcolor:"#EEEEEE",buttons:v}];k[0].active=Ie(i.series.baseFrequency,k[0].buttons),void 0===i.series.baseAggregation?i.series.baseAggregationType="not available":function(e,t){for(var a=t.length,n=!1,o=0;o<a;o++)t[o].args[1]===e&&(n=!0);return n}(i.series.baseAggregation,v)?i.series.baseAggregationType="normal":i.series.baseAggregationType="custom","not available"===i.series.baseAggregationType&&"normal"!==i.series.baseFrequencyType&&(i.series.baseAggregation=i.defaultNames.aggregation,i.series.baseAggregationLabel=i.defaultNames.aggregation,i.series.customAggregation=!0,y[0].label=x(i.defaultNames.aggregation),y[0].args[1]=i.defaultNames.aggregation,k[1].buttons=y,k[1].visible=!1,k[1].type="buttons",k[1].showactive=!1),"normal"===i.series.baseFrequencyType&&"normal"!==i.series.baseAggregationType&&("not available"===i.series.baseAggregationType?(i.series.baseAggregation=i.defaultNames.aggregation,i.series.baseAggregationLabel=i.defaultNames.aggregation,i.series.customAggregation=!0,y[0].label=x(i.defaultNames.aggregation),y[0].args[1]=i.defaultNames.aggregation):(x(i.series.baseAggregation).length>i.maxNumberOfCharactersInAggregationButton?i.series.baseAggregationLabel=x(i.series.baseAggregation).substring(0,i.maxNumberOfCharactersInAggregationButton-1)+".":i.series.baseAggregationLabel=i.series.baseAggregation,i.series.customAggregation=!0,y[0].label=x(i.series.baseAggregationLabel),y[0].args[1]=i.series.baseAggregationLabel),Fe(y,m),Fe(v,m),k[1].buttons=m,k[1].active=0,k[1].type="dropdown");var P=document.createElement("canvas");"normal"!==i.series.baseFrequencyType&&"not available"!==i.series.baseAggregationType&&("custom"===i.series.baseAggregationType?(i.series.baseAggregation=i.series.baseAggregation,x(i.series.baseAggregation).length>i.maxNumberOfCharactersInAggregationButton?i.series.baseAggregationLabel=x(i.series.baseAggregation).substring(0,i.maxNumberOfCharactersInAggregationButton-1)+".":i.series.baseAggregationLabel=i.series.baseAggregation,i.series.customAggregation=!0,y[0].label=Re(x(i.series.baseAggregationLabel),i.singleButtonStringLengthInPixels,k[1].font.family,k[1].font.size,P),y[0].args[1]=i.series.baseAggregation):(i.series.baseAggregationLabel=qe(i.series.baseAggregation,v),i.series.customAggregation=!1,y[0].label=Re(x(i.series.baseAggregationLabel),i.singleButtonStringLengthInPixels,k[1].font.family,k[1].font.size,P),y[0].args[1]=i.series.baseAggregation),k[1].buttons=y,k[1].visible=!0,k[1].active=0,k[1].type="buttons",k[1].showactive=!1),"normal"===i.series.baseFrequencyType&&"normal"===i.series.baseAggregationType&&(i.series.baseAggregation=i.series.baseAggregation,i.series.baseAggregationLabel=qe(i.series.baseAggregation,v),i.series.customAggregation=!1,k[1].buttons=v,k[1].visible=!0,k[1].type="dropdown",k[1].active=Ie(i.series.baseAggregation,v)),i.singleAggregationButton=y,i.baseAggregationButtons=v,i.combinedAggregationButtons=m,void 0!==i.changeFrequencyAggregationTo&&(void 0===i.changeFrequencyAggregationTo.frequency?(i.changeFrequencyAggregationTo.frequency="base",i.changeFrequencyAggregationTo.aggregation=i.series.aggregation):void 0===i.changeFrequencyAggregationTo.aggregation&&(i.changeFrequencyAggregationTo.aggregation=i.series.aggregation)),xe({},l);var O={buttons:[{step:"month",stepmode:"backward",count:1,label:x("1m")},{step:"month",stepmode:"backward",count:6,label:x("6m")},{step:"year",stepmode:"todate",count:1,label:x("YTD")},{step:"year",stepmode:"backward",count:1,label:x("1y")},{step:"year",stepmode:"backward",count:5,label:x("5y")},{step:"year",stepmode:"backward",count:10,label:x("10y")},{step:"all",label:x("all")}],font:{family:"Open Sans, Arial",size:12,color:"#0d0d0d"},xanchor:"right",x:1,yanchor:"bottom",y:-.24},M=[{name:"compare",visible:!0,type:"buttons",showactive:!1,y:-.24,yanchor:"bottom",x:0,xanchor:"left",pad:{t:1,r:1,b:1,l:1},direction:"right",font:{family:"Open Sans, Arial",size:12,color:"#0d0d0d"},bgcolor:"#EEEEEE",buttons:[{method:"relayout",args:["compare",!i.transformToBaseIndex],label:i.transformToBaseIndex?"uncompare":"compare"}]}];xe({showLink:!1,displayModeBar:!1},u),void 0===l.tracesInitialDate&&(l.tracesInitialDate=""),void 0===l.tracesEndDate&&(l.tracesEndDate="");var C={otherDataProperties:r,dataSources:s,divInfo:e,settings:i,timeInfo:l,selectorOptions:void 0===c.xaxis.rangeselector?O:c.xaxis.rangeselector,frequencyUpdateMenu:k,compareUpdateMenu:M,layout:c,options:u};a&&o&&console.timeEnd("TIME: initialSettingsBeforeReadData"),a&&n&&console.log("passedParemeters: ",C),A(t,C,!0)},t.readSomeDataSourcesIntoData=function(e,t,r,s={},i={},l){if(a&&o&&console.time("TIME: readSomeDataSourcesIntoData"),arguments.length<3)return"incomplete arguments";"function"!=typeof l&&(l=function(){}),xe({queueConcurrencyLimit:10,queueConcurrencyDelay:5,waitForGlobalData:!1,dataReadFlag:[!1],displayRecessions:!1},s),a&&n&&console.log("settings after settings default: ",s),xe({},i),void 0===i.tracesInitialDate&&(i.tracesInitialDate=""),void 0===i.tracesEndDate&&(i.tracesEndDate="");var g={otherDataProperties:t,dataSources:r,settings:s,timeInfo:i};a&&o&&console.timeEnd("TIME: readSomeDataSourcesIntoData"),A(e,g,!1,l)},t.updateKnowRecessions=function(e=""){if(b[0]=!0,""===e){var t="://kapitalvalue.com/plots_data/testing/fredRecessions-unlocked.php?observation_start=2015-12-01";e=t=Ke()?"https"+t:"http"+t}var n=d3.queue(1);n.defer(E,e,D),n.awaitAll(function(e){e?(a&&m&&console.log("updateKnowRecessions"),a&&m&&console.log("the error is",e),v[0]=!0,b[0]=!1):(a&&m&&console.log("knowRecessionsDates updated"),v[0]=!0,b[0]=!1)})},t.padTo2=j,t.getTicktextAndTickvals=function(e,t,a,n,o,r,s,i,l,g){for(var c=H(e),u=H(t),d=new Date(u.year,u.month-1,u.day),m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],y=[{name:"daily",initialDate:new Date(c.year,c.month-1,c.day),monthsStep:0,daysStep:1,string:"2000-04-30",stringName:"date"},{name:"everyOtherDay",initialDate:new Date(c.year,c.month-1,c.day),monthsStep:0,daysStep:2,string:"2000-04-30",stringName:"date"},{name:"weekly",initialDate:new Date(c.year,c.month-1,c.day),monthsStep:0,daysStep:7,string:"2000-04-30",stringName:"date"},{name:"biweekly",initialDate:new Date(c.year,c.month-1,c.day),monthsStep:0,daysStep:14,string:"2000-04-30",stringName:"date"},{name:"monthly",initialDate:new Date(c.year,c.month,0),monthsStep:1,daysStep:0,string:"monthly"===n?"Nov 2000":"2000-04",stringName:"monthly"===n?"month":"year-month"},{name:"quarterly",initialDate:c.month<4||c.month>9?new Date(c.year,3*Math.floor(c.month/3)-1,31):new Date(c.year,3*Math.floor(c.month/3)-1,30),monthsStep:3,daysStep:0,string:"monthly"===n?"Nov 2000":"quarterly"===n?"Q4 2000":"2000-00",stringName:"monthly"===n?"month":"quarterly"===n?"quarter":"year-month"},{name:"semiannual",initialDate:c.month<7?new Date(c.year,5,30):new Date(c.year,11,31),monthsStep:6,daysStep:0,string:"semiannual"===n?"H2 2000":"quarterly"===n?"Q4 2000":"2000-00",stringName:"semiannual"===n?"semester":"quarterly"===n?"quarter":"year-month"},{name:"annual",initialDate:new Date(c.year,11,31),monthsStep:12,daysStep:0,string:"semiannual"===n?"H2 2000":"2000",stringName:"semiannual"===n?"semester":"year"},{name:"biennial",initialDate:new Date(c.year,11,31),monthsStep:24,daysStep:0,string:"2000",stringName:"year"},{name:"quinquennial",initialDate:new Date(Y(c.year,5),11,31),monthsStep:60,daysStep:0,string:"2000",stringName:"year"},{name:"decennial",initialDate:new Date(Y(c.year,10),11,31),monthsStep:120,daysStep:0,string:"2000",stringName:"year"},{name:"quadranscentennial",initialDate:new Date(Y(c.year,25),11,31),monthsStep:300,daysStep:0,string:"2000",stringName:"year"},{name:"semicentennial",initialDate:new Date(Y(c.year,50),11,31),monthsStep:600,daysStep:0,string:"2000",stringName:"year"},{name:"centennial",initialDate:new Date(Y(c.year,100),11,31),monthsStep:1200,daysStep:0,string:"2000",stringName:"year"},{name:"bicentennial",initialDate:new Date(Y(c.year,100),11,31),monthsStep:2400,daysStep:0,string:"2000",stringName:"year"},{name:"sestercentennial",initialDate:new Date(Y(c.year,250),11,31),monthsStep:3e3,daysStep:0,string:"2000",stringName:"year"},{name:"quincentenary",initialDate:new Date(Y(c.year,500),11,31),monthsStep:6e3,daysStep:0,string:"2000",stringName:"year"},{name:"millenial",initialDate:new Date(Y(c.year,1e3),11,31),monthsStep:12e3,daysStep:0,string:"2000",stringName:"year"}],f="undefined",p=0;p<y.length;p++)y[p].name===n&&(f=p,p=y.length);"undefined"===f&&(n=y[f=0].name);var h=new Date,x=0,v={ticktext:[],tickvals:[]};for(p=f;p<y.length;p++){for(x=0,h=new Date(y[p].initialDate.getTime());h<=d;)x++,y[p].daysStep>0&&h.setDate(h.getDate()+y[p].daysStep),y[p].monthsStep>0&&(h=new Date(h.getFullYear(),h.getMonth()+y[p].monthsStep+1,0));if(y[p].j=x,y[p].xSpace=0===x?0:(s-i-l)/(x*L(y[p].string,o,r,g)),y[p].xSpace>=a){for(h=new Date(y[p].initialDate.getTime());h<=d;)v.tickvals.push(h.getFullYear()+"-"+j(h.getMonth()+1)+"-"+j(h.getDate())),"date"===y[p].stringName?v.ticktext.push(h.getFullYear()+"-"+j(h.getMonth()+1)+"-"+j(h.getDate())):"month"===y[p].stringName?v.ticktext.push(m[h.getMonth()]+" "+h.getFullYear()):"quarter"===y[p].stringName?v.ticktext.push("Q"+Math.ceil((h.getMonth()+1)/3)+" "+h.getFullYear()):"semester"===y[p].stringName?v.ticktext.push("H"+Math.ceil((h.getMonth()+1)/6)+" "+h.getFullYear()):"year"===y[p].stringName?v.ticktext.push(""+h.getFullYear()):"year-month"===y[p].stringName&&v.ticktext.push(h.getFullYear()+"-"+j(h.getMonth()+1)),y[p].daysStep>0&&h.setDate(h.getDate()+y[p].daysStep),y[p].monthsStep>0&&(h=new Date(h.getFullYear(),h.getMonth()+y[p].monthsStep+1,0));p=y.length}}return v},t.createDataOriginal=function(e){for(var t,a=0;a<e.length;a++)if(void 0===e[a].xOriginal)for(e[a].xOriginal=[],e[a].yOriginal=[],t=0;t<e[a].x.length;t++)e[a].xOriginal.push(e[a].x[t]),e[a].yOriginal.push(e[a].y[t])},t.transformSeriesByFrequencies=function(e,t,a){for(var n,o,r=0,s={},i=0,l=0,g={},c={},u={},d=!0,m="",y={},f={},p={},h={},x=!1,v=0;v<e.length;v++){for(m in d=!0,x=!1,t)t.hasOwnProperty(m)&&(t[m]?void 0!==e[v][m]?h[m]=!1:(h[m]=!0,x=!0):h[m]=!1);if(x){for(m in h)h.hasOwnProperty(m)&&h[m]&&(y[m]="undefined",f[m]=0);for(r=e[v].xOriginal.length-1;r>-1;r--){if(s=H(e[v].xOriginal[r]),n=d?"undefined":e[v].xOriginal[r+1],o=r>0?e[v].xOriginal[r-1]:"undefined",i=Number(e[v].yOriginal[r]),g=H(J(s.year,s.month,s.day)),c=H(W(s.year,s.month,s.day)),d){for(m in G(s.year,s.month,s.day,a),h)h.hasOwnProperty(m)&&(p[m]={sum:0,n:0,calculate:!1});d=!1}for(m in u=G(s.year,s.month,s.day,a),h)h.hasOwnProperty(m)&&((n<u.begins[m]||g.string<u.begins[m])&&(p[m].calculate=!0),!0===p[m].calculate&&(p[m].sum=Number(p[m].sum)+i,p[m].n=Number(p[m].n)+1),("undefined"!=o&&o>=u.ends[m]||c.string>=u.ends[m])&&(void 0===e[v][m]&&(e[v][m]={x:[],close:[],average:[],change:[],percChange:[],sqrPercChange:[],cumulative:[]}),e[v][m].x.unshift(u.label[m]),!0===p[m].calculate?(e[v][m].average.unshift(p[m].sum/p[m].n),p[m].sum=0,p[m].n=0,p[m].calculate=!1):e[v][m].average.unshift("N/A"),e[v][m].close.unshift(i),e[v][m].cumulative.unshift(f[m]+i),"undefined"!==y[m]?(l=i-y[m],e[v][m].change.unshift(l),l=0!==y[m]?l/y[m]:"N/A",e[v][m].percChange.unshift(l),e[v][m].sqrPercChange.unshift("N/A"!=l?l*l:"N/A")):(e[v][m].change.unshift("N/A"),e[v][m].percChange.unshift("N/A"),e[v][m].sqrPercChange.unshift("N/A")),y[m]=i,f[m]=f[m]+i))}}}},t.findDateFromTodayAsString=function(e,t,a){var n;return"end of year"===t?(n=a,ee(new Date(e.getFullYear()+n,11,31))):"end of month"===t?function(e,t){var a=e;return ee(new Date(a.getFullYear(),a.getMonth()+1+t,0))}(e,a):"end of day"===t?function(e,t){var a=e;return ee(new Date(a.getFullYear(),a.getMonth(),a.getDate()+t))}(e,a):ee(e)},t.arrayCopy=function(e){a&&console.log("original array in shallow copy: ",e);var t=[];if(void 0!==e&&"[object Array]"===Object.prototype.toString.call(e)){var n=e.length;t.length=n;for(var o=0;o<n;o++)t[o]=e[o];a&&console.log("array copy in shallow copy: ",t)}return t},t}():DEBUG&&OTHER_DEBUGS&&console.log("aoPlotlyAddOn Library already defined.")}(window);
